{"version":3,"sources":["../src/lib/ai/AIContext.tsx","../src/lib/ai/useAI.ts","../src/lib/licensing/LicenseContext.tsx","../src/lib/licensing/LicenseProvider.tsx","../src/lib/licensing/checkLicense.ts","../src/lib/ai/utils/sse.ts","../src/lib/ai/clients/openai.ts","../src/lib/ai/clients/groq.ts","../src/components/ui/Button.tsx","../../../node_modules/clsx/dist/clsx.mjs","../src/components/ui/Card.tsx","../src/components/ChatBox/ChatBox.tsx","../src/lib/licensing/withLicenseGuard.tsx","../src/components/PaywallCard/PaywallCard.tsx","../src/components/Summarizer/Summarizer.tsx","../src/components/Translator/Translator.tsx","../src/components/Rewriter/Rewriter.tsx","../src/lib/ai/AIProvider.tsx","../src/index.ts"],"sourcesContent":["import React, { createContext, useContext } from \"react\";\r\nimport type { AIClient } from \"./types\";\r\n\r\n/* eslint-disable react-refresh/only-export-components */\r\n\r\nexport type ProviderName = \"openai\" | \"groq\";\r\n\r\nexport type AIContextType = {\r\n  client: AIClient;\r\n\r\n  fallback?: AIClient;\r\n\r\n  defaultModel: string;\r\n\r\n  provider: ProviderName;\r\n\r\n  setProvider: (p: ProviderName) => void;\r\n};\r\n\r\nexport const AIContext = createContext<AIContextType | null>(null);\r\n\r\nexport const AIProviderBase: React.FC<\r\n  React.PropsWithChildren<{ value: AIContextType }>\r\n> = ({ value, children }) => {\r\n  return React.createElement(AIContext.Provider, { value }, children);\r\n};\r\n\r\nexport function useAIContext(): AIContextType {\r\n  const ctx = useContext(AIContext);\r\n  if (!ctx) throw new Error(\"useAIContext must be used inside <AIProvider>\");\r\n  return ctx;\r\n}\r\n","import { useState } from \"react\";\r\nimport type { AIMessage } from \"./types\";\r\nimport { useAIContext } from \"./AIContext\";\r\n\r\nexport function useAI(defaultModel?: string) {\r\n  const {\r\n    client,\r\n    fallback,\r\n    defaultModel: ctxModel,\r\n    provider,\r\n    setProvider,\r\n  } = useAIContext();\r\n  const model = defaultModel ?? ctxModel;\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  async function withFallback<T>(\r\n    fn: (c: typeof client) => Promise<T>\r\n  ): Promise<T> {\r\n    try {\r\n      return await fn(client);\r\n    } catch (e: unknown) {\r\n      const message =\r\n        e instanceof Error ? e.message : String(e ?? \"Unknown error\");\r\n\r\n      if (fallback && provider === \"openai\") {\r\n        const shouldFallback = /429|401|5\\d\\d|rate|quota|network|fetch/i.test(\r\n          message\r\n        );\r\n        if (shouldFallback) {\r\n          setProvider(\"groq\");\r\n          setError(\"falling back to groq ai provider\");\r\n          return await fn(fallback);\r\n        }\r\n      }\r\n\r\n      throw e instanceof Error ? e : new Error(String(e));\r\n    }\r\n  }\r\n\r\n  async function chat(messages: AIMessage[], temperature = 0.7) {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      return await withFallback((c) =>\r\n        c.chat({ model, messages, temperature })\r\n      );\r\n    } catch (e: unknown) {\r\n      setError(e instanceof Error ? e.message : String(e ?? \"Unknown error\"));\r\n      return \"\";\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function generate(prompt: string, temperature = 0.7) {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      return await withFallback((c) =>\r\n        c.generate({ model, prompt, temperature })\r\n      );\r\n    } catch (e: unknown) {\r\n      setError(e instanceof Error ? e.message : String(e ?? \"Unknown error\"));\r\n      return \"\";\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function streamGenerate(\r\n    prompt: string,\r\n    handlers: {\r\n      onToken?: (t: string) => void;\r\n      onDone?: (final: string) => void;\r\n    },\r\n    temperature = 0.7\r\n  ) {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      await withFallback((c) =>\r\n        c.streamGenerate(prompt, handlers, { model, temperature })\r\n      );\r\n    } catch (e: unknown) {\r\n      setError(e instanceof Error ? e.message : String(e ?? \"Unknown error\"));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return {\r\n    chat,\r\n    generate,\r\n    streamGenerate,\r\n\r\n    loading,\r\n    error,\r\n    provider,\r\n  };\r\n}\r\n","import { createContext, useContext } from \"react\";\r\nimport type { LicenseState } from \"./types\";\r\n\r\nexport const LicenseContext = createContext<LicenseState>({\r\n  key: undefined,\r\n  valid: false,\r\n  status: \"invalid\",\r\n  payload: null,\r\n  error: \"NO_PROVIDER\",\r\n});\r\n\r\nexport function useLicense(): LicenseState {\r\n  return useContext(LicenseContext);\r\n}\r\n","import React, { useMemo } from \"react\";\r\nimport type { LicenseState } from \"./types\";\r\nimport { verifyLicense } from \"./checkLicense\";\r\nimport { LicenseContext } from \"./LicenseContext\";\r\n\r\ntype LicenseProviderProps = {\r\n  licenseKey?: string;\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport function LicenseProvider({\r\n  licenseKey,\r\n  children,\r\n}: LicenseProviderProps) {\r\n  const state = useMemo<LicenseState>(() => {\r\n    const res = verifyLicense(licenseKey);\r\n\r\n    const valid = res.valid;\r\n    return {\r\n      key: licenseKey?.trim(),\r\n      valid,\r\n      status: valid ? \"valid\" : \"invalid\",\r\n      payload: valid ? res.payload : null,\r\n      error: valid ? null : res.error,\r\n    };\r\n  }, [licenseKey]);\r\n\r\n  return (\r\n    <LicenseContext.Provider value={state}>{children}</LicenseContext.Provider>\r\n  );\r\n}\r\n","import nacl from \"tweetnacl\";\r\nimport type { LicensePayload } from \"./types\";\r\n\r\n// ‚úÖ —Ç–≤—ñ–π public key (base64url, 43 chars –¥–ª—è ed25519)\r\nconst PUBLIC_KEY_B64URL = \"y4hphPusMOvXm5V6SID7LYhLvf2v5etnyAtnoXNoNwM\";\r\n\r\nfunction safeBase64UrlToUint8Array(b64url: string): Uint8Array | null {\r\n  try {\r\n    const s = (b64url || \"\").trim();\r\n    if (!s || !/^[A-Za-z0-9_-]+$/.test(s)) return null;\r\n\r\n    const b64 = s.replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n    const pad = b64.length % 4 ? \"=\".repeat(4 - (b64.length % 4)) : \"\";\r\n    const clean = b64 + pad;\r\n\r\n    const binary = atob(clean);\r\n    const bytes = new Uint8Array(binary.length);\r\n    for (let i = 0; i < binary.length; i++) bytes[i] = binary.charCodeAt(i);\r\n    return bytes;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction isValidDateYYYYMMDD(s: string): boolean {\r\n  return /^\\d{4}-\\d{2}-\\d{2}$/.test(s);\r\n}\r\n\r\nfunction todayYYYYMMDD(): string {\r\n  const d = new Date();\r\n  const yyyy = d.getFullYear();\r\n  const mm = String(d.getMonth() + 1).padStart(2, \"0\");\r\n  const dd = String(d.getDate()).padStart(2, \"0\");\r\n  return `${yyyy}-${mm}-${dd}`;\r\n}\r\n\r\nfunction isExpired(expYYYYMMDD: string): boolean {\r\n  return expYYYYMMDD < todayYYYYMMDD();\r\n}\r\n\r\nfunction parseLicense(\r\n  key: string\r\n): { payloadJson: string; sig: Uint8Array } | null {\r\n  if (!key.startsWith(\"mrszlv1.\")) return null;\r\n\r\n  const parts = key.split(\".\");\r\n  if (parts.length !== 3) return null;\r\n\r\n  const payloadBytes = safeBase64UrlToUint8Array(parts[1]);\r\n  const sigBytes = safeBase64UrlToUint8Array(parts[2]);\r\n\r\n  if (!payloadBytes || !sigBytes) return null;\r\n  if (sigBytes.length !== 64) return null; // ed25519 sig\r\n\r\n  const payloadJson = new TextDecoder().decode(payloadBytes);\r\n  return { payloadJson, sig: sigBytes };\r\n}\r\n\r\nexport type VerifyLicenseResult =\r\n  | { valid: true; payload: LicensePayload; error: null }\r\n  | { valid: false; payload: null; error: string };\r\n\r\nexport function verifyLicense(key?: string): VerifyLicenseResult {\r\n  const k = key?.trim();\r\n  if (!k) return { valid: false, payload: null, error: \"NO_KEY\" };\r\n\r\n  // demo key (–æ–ø—Ü—ñ–π–Ω–æ)\r\n  if (k.startsWith(\"mrszlv_demo_\")) {\r\n    return {\r\n      valid: true,\r\n      payload: {\r\n        email: \"demo\",\r\n        plan: \"demo\",\r\n        exp: \"2999-12-31\",\r\n        iat: todayYYYYMMDD(),\r\n      },\r\n      error: null,\r\n    };\r\n  }\r\n\r\n  const parsed = parseLicense(k);\r\n  if (!parsed) return { valid: false, payload: null, error: \"BAD_FORMAT\" };\r\n\r\n  let payload: LicensePayload;\r\n  try {\r\n    payload = JSON.parse(parsed.payloadJson) as LicensePayload;\r\n  } catch {\r\n    return { valid: false, payload: null, error: \"BAD_PAYLOAD_JSON\" };\r\n  }\r\n\r\n  if (!payload?.email || !payload?.plan || !payload?.exp || !payload?.iat) {\r\n    return { valid: false, payload: null, error: \"MISSING_FIELDS\" };\r\n  }\r\n\r\n  if (payload.plan !== \"pro\" && payload.plan !== \"demo\") {\r\n    return { valid: false, payload: null, error: \"BAD_PLAN\" };\r\n  }\r\n\r\n  if (!isValidDateYYYYMMDD(payload.exp) || !isValidDateYYYYMMDD(payload.iat)) {\r\n    return { valid: false, payload: null, error: \"BAD_DATE\" };\r\n  }\r\n\r\n  if (isExpired(payload.exp)) {\r\n    return { valid: false, payload: null, error: \"EXPIRED\" };\r\n  }\r\n\r\n  const publicKey = safeBase64UrlToUint8Array(PUBLIC_KEY_B64URL);\r\n  if (!publicKey || publicKey.length !== 32) {\r\n    return { valid: false, payload: null, error: \"BAD_PUBLIC_KEY\" };\r\n  }\r\n\r\n  const payloadBytes = new TextEncoder().encode(parsed.payloadJson);\r\n\r\n  const ok = nacl.sign.detached.verify(payloadBytes, parsed.sig, publicKey);\r\n  if (!ok) return { valid: false, payload: null, error: \"BAD_SIGNATURE\" };\r\n\r\n  return { valid: true, payload, error: null };\r\n}\r\n\r\n// ‚úÖ –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥—É (guard), —è–∫—â–æ –¥–µ—Å—å –æ—á—ñ–∫—É—î—Ç—å—Å—è boolean\r\nexport function checkLicense(key?: string): boolean {\r\n  return verifyLicense(key).valid;\r\n}\r\n","export async function readOpenAISSE(\r\n  res: Response,\r\n  onDelta: (chunk: string) => void\r\n): Promise<string> {\r\n  const reader = res.body!.getReader();\r\n  const decoder = new TextDecoder(\"utf-8\");\r\n  let buffer = \"\";\r\n  let full = \"\";\r\n\r\n  while (true) {\r\n    const { done, value } = await reader.read();\r\n    if (done) break;\r\n    buffer += decoder.decode(value, { stream: true });\r\n\r\n    for (const line of buffer.split(\"\\n\")) {\r\n      if (!line) continue;\r\n      if (line.startsWith(\"data: \")) {\r\n        const payload = line.slice(6).trim();\r\n        if (payload === \"[DONE]\") {\r\n          buffer = \"\";\r\n          break;\r\n        }\r\n        try {\r\n          const json = JSON.parse(payload);\r\n          const delta: string =\r\n            json.choices?.[0]?.delta?.content ??\r\n            json.choices?.[0]?.message?.content ??\r\n            json.choices?.[0]?.text ??\r\n            \"\";\r\n          if (delta) {\r\n            full += delta;\r\n            onDelta(delta);\r\n          }\r\n        } catch {\r\n          /* ignore malformed chunk */\r\n        }\r\n      }\r\n    }\r\n\r\n    buffer = buffer.endsWith(\"\\n\") ? \"\" : buffer.split(\"\\n\").at(-1) ?? \"\";\r\n  }\r\n\r\n  return full;\r\n}\r\n","import type { AIClient, AIMessage } from \"../types\";\r\nimport { readOpenAISSE } from \"../utils/sse\";\r\n\r\nexport class OpenAIClient implements AIClient {\r\n  name = \"openai\" as const;\r\n  private apiKey: string;\r\n  private baseUrl = \"https://api.openai.com/v1\";\r\n\r\n  constructor(apiKey: string) {\r\n    this.apiKey = apiKey;\r\n  }\r\n\r\n  private headers(stream = false) {\r\n    return {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${this.apiKey}`,\r\n      ...(stream ? { Accept: \"text/event-stream\" } : {}),\r\n    };\r\n  }\r\n\r\n  async generate(opts: {\r\n    model: string;\r\n    prompt: string;\r\n    temperature?: number;\r\n  }) {\r\n    const res = await fetch(`${this.baseUrl}/chat/completions`, {\r\n      method: \"POST\",\r\n      headers: this.headers(false),\r\n      body: JSON.stringify({\r\n        model: opts.model,\r\n        temperature: opts.temperature ?? 0.7,\r\n        messages: [{ role: \"user\", content: opts.prompt }],\r\n      }),\r\n    });\r\n    if (!res.ok) throw new Error(await res.text());\r\n    const json = await res.json();\r\n    return json.choices?.[0]?.message?.content ?? \"\";\r\n  }\r\n\r\n  async chat(opts: {\r\n    model: string;\r\n    messages: AIMessage[];\r\n    temperature?: number;\r\n  }) {\r\n    const res = await fetch(`${this.baseUrl}/chat/completions`, {\r\n      method: \"POST\",\r\n      headers: this.headers(false),\r\n      body: JSON.stringify({\r\n        model: opts.model,\r\n        temperature: opts.temperature ?? 0.7,\r\n        messages: opts.messages,\r\n      }),\r\n    });\r\n    if (!res.ok) throw new Error(await res.text());\r\n    const json = await res.json();\r\n    return json.choices?.[0]?.message?.content ?? \"\";\r\n  }\r\n\r\n  async streamGenerate(\r\n    prompt: string,\r\n    handlers: {\r\n      onToken?: (t: string) => void;\r\n      onDone?: (final: string) => void;\r\n    },\r\n    opts?: { model: string; temperature?: number }\r\n  ) {\r\n    const res = await fetch(`${this.baseUrl}/chat/completions`, {\r\n      method: \"POST\",\r\n      headers: this.headers(true),\r\n      body: JSON.stringify({\r\n        model: opts?.model ?? \"gpt-4o-mini\",\r\n        temperature: opts?.temperature ?? 0.7,\r\n        messages: [{ role: \"user\", content: prompt }],\r\n        stream: true,\r\n      }),\r\n    });\r\n    if (!res.ok) throw new Error(await res.text());\r\n\r\n    const full = await readOpenAISSE(res, (chunk) => handlers.onToken?.(chunk));\r\n    handlers.onDone?.(full);\r\n  }\r\n}\r\n","import type { AIClient, AIMessage } from \"../types\";\r\nimport { readOpenAISSE } from \"../utils/sse\";\r\n\r\nexport class GroqClient implements AIClient {\r\n  name = \"groq\" as const;\r\n  private apiKey: string;\r\n  private baseUrl = \"https://api.groq.com/openai/v1\";\r\n\r\n  constructor(apiKey: string) {\r\n    this.apiKey = apiKey;\r\n  }\r\n\r\n  private headers(stream = false) {\r\n    return {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${this.apiKey}`,\r\n      ...(stream ? { Accept: \"text/event-stream\" } : {}),\r\n    };\r\n  }\r\n\r\n  private mapModel(model: string) {\r\n    return model.startsWith(\"gpt\") || model.startsWith(\"o1\")\r\n      ? \"llama-3.1-8b-instant\"\r\n      : model;\r\n  }\r\n\r\n  async generate(opts: {\r\n    model: string;\r\n    prompt: string;\r\n    temperature?: number;\r\n  }) {\r\n    const res = await fetch(`${this.baseUrl}/chat/completions`, {\r\n      method: \"POST\",\r\n      headers: this.headers(false),\r\n      body: JSON.stringify({\r\n        model: this.mapModel(opts.model),\r\n        temperature: opts.temperature ?? 0.7,\r\n        messages: [{ role: \"user\", content: opts.prompt }],\r\n      }),\r\n    });\r\n    if (!res.ok) throw new Error(await res.text());\r\n    const json = await res.json();\r\n    return json.choices?.[0]?.message?.content ?? \"\";\r\n  }\r\n\r\n  async chat(opts: {\r\n    model: string;\r\n    messages: AIMessage[];\r\n    temperature?: number;\r\n  }) {\r\n    const res = await fetch(`${this.baseUrl}/chat/completions`, {\r\n      method: \"POST\",\r\n      headers: this.headers(false),\r\n      body: JSON.stringify({\r\n        model: this.mapModel(opts.model),\r\n        temperature: opts.temperature ?? 0.7,\r\n        messages: opts.messages,\r\n      }),\r\n    });\r\n    if (!res.ok) throw new Error(await res.text());\r\n    const json = await res.json();\r\n    return json.choices?.[0]?.message?.content ?? \"\";\r\n  }\r\n\r\n  async streamGenerate(\r\n    prompt: string,\r\n    handlers: {\r\n      onToken?: (t: string) => void;\r\n      onDone?: (final: string) => void;\r\n    },\r\n    opts?: { model: string; temperature?: number }\r\n  ) {\r\n    const res = await fetch(`${this.baseUrl}/chat/completions`, {\r\n      method: \"POST\",\r\n      headers: this.headers(true),\r\n      body: JSON.stringify({\r\n        model: this.mapModel(opts?.model ?? \"llama-3.1-8b-instant\"),\r\n        temperature: opts?.temperature ?? 0.7,\r\n        messages: [{ role: \"user\", content: prompt }],\r\n        stream: true,\r\n      }),\r\n    });\r\n    if (!res.ok) throw new Error(await res.text());\r\n\r\n    const full = await readOpenAISSE(res, (chunk) => handlers.onToken?.(chunk));\r\n    handlers.onDone?.(full);\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nimport clsx from \"clsx\";\r\n\r\ntype Props = React.PropsWithChildren<{\r\n  className?: string;\r\n  disabled?: boolean;\r\n  onClick?: () => void;\r\n  type?: \"button\" | \"submit\";\r\n}>;\r\n\r\nexport const Button: React.FC<Props> = ({\r\n  className,\r\n  disabled,\r\n  onClick,\r\n  type = \"button\",\r\n  children,\r\n}) => (\r\n  <button\r\n    type={type}\r\n    onClick={onClick}\r\n    disabled={disabled}\r\n    className={clsx(\r\n      \"rounded-xl px-4 py-2 text-sm font-medium transition-colors cursor-pointer\",\r\n      \"bg-indigo-500 text-white hover:bg-indigo-600\",\r\n      \"dark:bg-indigo-400 dark:hover:bg-indigo-500\",\r\n      \"disabled:opacity-50 disabled:cursor-not-allowed\",\r\n      className\r\n    )}\r\n  >\r\n    {children}\r\n  </button>\r\n);\r\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import React from \"react\";\r\n\r\nimport clsx from \"clsx\";\r\n\r\ntype CardProps = { children: React.ReactNode; className?: string };\r\n\r\nexport const Card: React.FC<CardProps> = ({ children, className = \"\" }) => {\r\n  return (\r\n    <div\r\n      className={clsx(\r\n        \"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm\",\r\n        \"dark:border-slate-700 dark:bg-slate-900\",\r\n        className\r\n      )}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo, useRef, useState } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\nimport type { AIMessage } from \"../../lib/ai/types\";\r\nimport { useAI } from \"../../lib/ai/useAI\";\r\nimport { withLicenseGuard } from \"../../lib/licensing/withLicenseGuard\";\r\n\r\nimport { Button } from \"../ui/Button\";\r\nimport { Card } from \"../ui/Card\";\r\n\r\nconst ChatBoxInner: React.FC = () => {\r\n  const { chat, loading, error, provider } = useAI();\r\n\r\n  const [messages, setMessages] = useState<AIMessage[]>([]);\r\n  const [input, setInput] = useState(\"\");\r\n\r\n  const endRef = useRef<HTMLDivElement>(null);\r\n\r\n  const system = useMemo<AIMessage>(\r\n    () => ({\r\n      role: \"system\",\r\n      content: [\r\n        \"You are a helpful AI assistant.\",\r\n        \"Keep responses short and practical.\",\r\n      ].join(\"\\n\"),\r\n    }),\r\n    []\r\n  );\r\n\r\n  async function handleSend() {\r\n    const text = input.trim();\r\n    if (!text) return;\r\n\r\n    const next = [...messages, { role: \"user\", content: text } as AIMessage];\r\n    setInput(\"\");\r\n\r\n    const reply = await chat([system, ...next]);\r\n    setMessages([...next, { role: \"assistant\", content: reply }]);\r\n\r\n    endRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }\r\n\r\n  return (\r\n    <Card className=\"max-w-5xl mx-auto space-y-5 bg-slate-950/70 border-slate-800\">\r\n      {/* header */}\r\n      <div className=\"flex items-center justify-between gap-3\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"inline-flex h-7 w-7 items-center justify-center rounded-full bg-violet-500/20 text-violet-300\">\r\n            üí¨\r\n          </span>\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-slate-50\">ChatBox</h3>\r\n            <p className=\"text-xs text-slate-400\">\r\n              Multi-turn chat with your AI provider.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* messages area */}\r\n      <div\r\n        className={clsx(\r\n          \"h-56 md:h-64 w-full overflow-auto rounded-2xl border border-slate-700\",\r\n          \"bg-slate-950/60 px-3 py-3 text-sm\"\r\n        )}\r\n      >\r\n        {messages.length === 0 && (\r\n          <div className=\"flex h-full items-center justify-center text-sm text-slate-500\">\r\n            Start the conversation\r\n          </div>\r\n        )}\r\n\r\n        {messages.map((m, idx) => (\r\n          <div\r\n            key={idx}\r\n            className={clsx(\r\n              \"mb-2 flex\",\r\n              m.role === \"user\" ? \"justify-end\" : \"justify-start\"\r\n            )}\r\n          >\r\n            <div\r\n              className={clsx(\r\n                \"max-w-[80%] rounded-2xl px-3 py-2 shadow-sm whitespace-pre-wrap break-words\",\r\n                m.role === \"user\"\r\n                  ? \"bg-indigo-600 text-white\"\r\n                  : \"bg-slate-900 text-slate-100 border border-slate-700\"\r\n              )}\r\n            >\r\n              {m.content}\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        <div ref={endRef} />\r\n      </div>\r\n\r\n      {/* input row */}\r\n      <div className=\"flex w-full gap-3\">\r\n        <input\r\n          aria-label=\"Type a message\"\r\n          className={clsx(\r\n            \"flex-1 rounded-xl border border-slate-700 bg-slate-950/70 px-3 py-2 text-sm text-slate-100 outline-none\",\r\n            \"placeholder:text-slate-500 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40\"\r\n          )}\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyDown={(e) => {\r\n            if (e.key === \"Enter\" && !e.shiftKey) {\r\n              e.preventDefault();\r\n              void handleSend();\r\n            }\r\n          }}\r\n          placeholder=\"Ask anything‚Ä¶\"\r\n          disabled={loading}\r\n        />\r\n\r\n        <Button\r\n          type=\"button\"\r\n          disabled={loading}\r\n          onClick={() => void handleSend()}\r\n          className=\"px-5\"\r\n        >\r\n          {loading ? \"Sending...\" : \"Send\"}\r\n        </Button>\r\n      </div>\r\n\r\n      {/* footer meta */}\r\n      <div className=\"flex items-center gap-3\">\r\n        {provider && (\r\n          <span className=\"rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-xs text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300\">\r\n            via {provider}\r\n          </span>\r\n        )}\r\n        {error && <p className=\"text-xs text-slate-400\">{error}</p>}\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport const ChatBox = withLicenseGuard(ChatBoxInner, {\r\n  title: \"ChatBox (Pro)\",\r\n  message:\r\n    \"ChatBox is available only with a valid @mrszlv/ai-ui-components license.\",\r\n});\r\n","import React from \"react\";\r\nimport { useLicense } from \"./LicenseContext\";\r\nimport { PaywallCard } from \"../../components/PaywallCard/PaywallCard\";\r\n\r\ntype GuardOptions = {\r\n  title?: string;\r\n  message?: string;\r\n  reason?: string;\r\n};\r\n\r\nconst LICENSE_URL = \"https://t.me/miroszlavpopovics\";\r\n\r\nexport function withLicenseGuard<P extends object>(\r\n  Wrapped: React.ComponentType<P>,\r\n  options?: GuardOptions\r\n): React.FC<P> {\r\n  const ComponentWithGuard: React.FC<P> = (props) => {\r\n    const { status, valid, error } = useLicense();\r\n\r\n    if (status === \"checking\") return null;\r\n\r\n    if (!valid) {\r\n      const isDev =\r\n        typeof import.meta !== \"undefined\" &&\r\n        import.meta.env?.MODE === \"development\";\r\n\r\n      return (\r\n        <PaywallCard\r\n          title={options?.title}\r\n          message={\r\n            options?.message ??\r\n            \"This component is available only with a valid @mrszlv/ai-ui-components license.\"\r\n          }\r\n          reason={\r\n            options?.reason ??\r\n            'Wrap your app with <LicenseProvider licenseKey=\"...\" />.'\r\n          }\r\n          ctaHref={LICENSE_URL}\r\n          ctaLabel=\"Get license\"\r\n          npmPackage=\"@mrszlv/ai-ui-components\"\r\n          debugReason={isDev ? error : null}\r\n        />\r\n      );\r\n    }\r\n\r\n    return <Wrapped {...props} />;\r\n  };\r\n\r\n  ComponentWithGuard.displayName = `WithLicenseGuard(${\r\n    Wrapped.displayName || Wrapped.name || \"Component\"\r\n  })`;\r\n\r\n  return ComponentWithGuard;\r\n}\r\n","import React from \"react\";\r\n\r\ntype PaywallCardProps = {\r\n  title?: string;\r\n  message?: string;\r\n  reason?: string;\r\n\r\n  /** –ö—É–¥–∏ –≤–µ—Å—Ç–∏ —é–∑–µ—Ä–∞ –∑–∞ –ª—ñ—Ü–µ–Ω–∑—ñ—î—é (—Å–∞–π—Ç/—Ç–µ–ª–µ–≥—Ä–∞–º/checkout) */\r\n  ctaHref?: string;\r\n  ctaLabel?: string;\r\n\r\n  /** –ü–æ–∫–∞–∑–∞—Ç–∏ npm package name, —â–æ–± –±—É–ª–æ —â–æ —ñ–Ω—Å—Ç–∞–ª–∏—Ç–∏ */\r\n  npmPackage?: string;\r\n\r\n  /** –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ —Ç–µ—Ö–Ω—ñ—á–Ω—É –ø—Ä–∏—á–∏–Ω—É —Ç—ñ–ª—å–∫–∏ –≤ dev */\r\n  debugReason?: string | null;\r\n};\r\n\r\nconst DEFAULT_CTA = \"https://t.me/miroszlavpopovics\";\r\nconst DEFAULT_PKG = \"@mrszlv/ai-ui-components\";\r\n\r\nexport const PaywallCard: React.FC<PaywallCardProps> = ({\r\n  title = \"Pro component\",\r\n  message = \"This component is available only with a valid license.\",\r\n  reason = 'Wrap your app with <LicenseProvider licenseKey=\"...\" />.',\r\n  ctaHref = DEFAULT_CTA,\r\n  ctaLabel = \"Get license\",\r\n  npmPackage = DEFAULT_PKG,\r\n  debugReason = null,\r\n}) => {\r\n  const handleGetLicense = () => {\r\n    // —â–æ–± —Ç–æ—á–Ω–æ –ø—Ä–∞—Ü—é–≤–∞–ª–æ –≤ –±—É–¥—å-—è–∫–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ\r\n    window.open(ctaHref, \"_blank\", \"noopener,noreferrer\");\r\n  };\r\n\r\n  const handleCopy = async (text: string) => {\r\n    try {\r\n      await navigator.clipboard.writeText(text);\r\n    } catch {\r\n      // fallback\r\n      const el = document.createElement(\"textarea\");\r\n      el.value = text;\r\n      document.body.appendChild(el);\r\n      el.select();\r\n      document.execCommand(\"copy\");\r\n      document.body.removeChild(el);\r\n    }\r\n  };\r\n\r\n  const installCmd = `npm i ${npmPackage}`;\r\n\r\n  return (\r\n    <div className=\"mx-auto w-full max-w-5xl rounded-3xl border border-white/10 bg-gradient-to-b from-slate-950 to-slate-900 p-8 shadow-[0_20px_60px_rgba(0,0,0,0.45)]\">\r\n      <div className=\"flex flex-col gap-3\">\r\n        <h3 className=\"text-lg font-semibold text-white\">{title}</h3>\r\n        <p className=\"text-sm text-white/80\">{message}</p>\r\n        <p className=\"text-sm text-white/55\">{reason}</p>\r\n\r\n        {debugReason ? (\r\n          <div className=\"mt-2 rounded-xl border border-white/10 bg-white/5 p-3 text-xs text-white/70\">\r\n            <span className=\"font-medium text-white/80\">debug:</span>{\" \"}\r\n            {debugReason}\r\n          </div>\r\n        ) : null}\r\n\r\n        <div className=\"mt-5 flex flex-wrap items-center gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleGetLicense}\r\n            className=\"rounded-xl bg-indigo-400 px-5 py-2.5 text-sm font-semibold text-slate-950 shadow hover:bg-indigo-300 active:scale-[0.99]\"\r\n          >\r\n            {ctaLabel}\r\n          </button>\r\n\r\n          <div className=\"flex flex-wrap items-center gap-2 text-xs text-white/60\">\r\n            <span className=\"rounded-lg border border-white/10 bg-white/5 px-2 py-1\">\r\n              {installCmd}\r\n            </span>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => handleCopy(installCmd)}\r\n              className=\"rounded-lg border border-white/10 bg-white/5 px-2 py-1 text-white/80 hover:bg-white/10\"\r\n            >\r\n              Copy\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-5 rounded-2xl border border-white/10 bg-white/5 p-4\">\r\n          <div className=\"text-xs font-semibold tracking-wide text-white/70\">\r\n            How to activate\r\n          </div>\r\n          <ol className=\"mt-2 list-decimal space-y-1 pl-5 text-sm text-white/70\">\r\n            <li>Buy/get a license key from the link above.</li>\r\n            <li>\r\n              Wrap your app:\r\n              <span className=\"ml-2 rounded-md bg-black/40 px-2 py-1 font-mono text-xs text-white/80\">\r\n                {'<LicenseProvider licenseKey=\"...\" />'}\r\n              </span>\r\n            </li>\r\n            <li>Reload the app and the component will unlock.</li>\r\n          </ol>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\n\r\nimport { useAI } from \"../../lib/ai/useAI\";\r\nimport { withLicenseGuard } from \"../../lib/licensing/withLicenseGuard\";\r\n\r\nimport { Button } from \"../ui/Button\";\r\nimport { Card } from \"../ui/Card\";\r\n\r\nfunction buildPrompt(text: string, language: string, format: string) {\r\n  return [\r\n    `You are a professional text summarizer that produces ${format.toLowerCase()} summaries in ${language}.`,\r\n    \"Rules:\",\r\n    \"- Preserve meaning and tone.\",\r\n    \"- Avoid changing facts.\",\r\n    \"- Keep formatting consistent (Markdown / line breaks).\",\r\n    \"\",\r\n    \"Text:\",\r\n    text,\r\n  ].join(\"\\n\");\r\n}\r\n\r\nconst SummarizerInner: React.FC = () => {\r\n  const { streamGenerate, loading, error, provider } = useAI();\r\n\r\n  const [src, setSrc] = useState(\"\");\r\n  const [out, setOut] = useState(\"\");\r\n\r\n  const [style, setStyle] = useState(\"Bulleted\");\r\n  const [lang, setLang] = useState(\"English\");\r\n\r\n  async function handleSummarize() {\r\n    const text = src.trim();\r\n    if (!text) return;\r\n\r\n    const prompt = buildPrompt(text, lang, style);\r\n    setOut(\"\");\r\n\r\n    await streamGenerate(prompt, {\r\n      onToken: (token: string) => {\r\n        setOut((prev) => prev + token);\r\n      },\r\n      onDone: () => {\r\n        // no-op\r\n      },\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Card className=\"max-w-5xl mx-auto space-y-5 bg-slate-950/70 border-slate-800\">\r\n      {/* header */}\r\n      <div className=\"flex items-center justify-between gap-3\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"inline-flex h-7 w-7 items-center justify-center rounded-full bg-emerald-500/20 text-emerald-300\">\r\n            üìù\r\n          </span>\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-slate-50\">Summarizer</h3>\r\n            <p className=\"text-xs text-slate-400\">\r\n              Turn long texts into clean summaries.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* main grid */}\r\n      <div className=\"grid gap-4 md:grid-cols-2 md:items-start\">\r\n        {/* left: source */}\r\n        <div className=\"flex flex-col gap-3\">\r\n          <div className=\"flex items-center justify-between text-xs text-slate-400\">\r\n            <span>Source text</span>\r\n            <span className=\"opacity-60\">\r\n              {src.trim().length ? `${src.trim().length} chars` : \"Paste text‚Ä¶\"}\r\n            </span>\r\n          </div>\r\n\r\n          <textarea\r\n            className=\"h-44 md:h-56 w-full resize-none rounded-xl border border-slate-700 bg-slate-950/70 p-3 text-sm text-slate-100 outline-none placeholder:text-slate-500 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40\"\r\n            value={src}\r\n            onChange={(e) => setSrc(e.target.value)}\r\n            placeholder=\"Paste text to summarize...\"\r\n          />\r\n\r\n          {/* controls */}\r\n          <div className=\"flex flex-wrap items-center gap-3 text-xs text-slate-400\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span>Style:</span>\r\n              <select\r\n                title=\"select summarizer\"\r\n                className=\"rounded-lg border border-slate-700 bg-slate-900 px-2 py-1 text-xs text-slate-100\"\r\n                value={style}\r\n                onChange={(e) => setStyle(e.target.value)}\r\n              >\r\n                <option>Bulleted</option>\r\n                <option>Short paragraph</option>\r\n                <option>Very concise</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              <span>Language:</span>\r\n              <select\r\n                title=\"select summarizer\"\r\n                className=\"rounded-lg border border-slate-700 bg-slate-900 px-2 py-1 text-xs text-slate-100\"\r\n                value={lang}\r\n                onChange={(e) => setLang(e.target.value)}\r\n              >\r\n                <option value=\"auto\">Auto</option>\r\n                <option value=\"English\">English</option>\r\n                <option value=\"Ukrainian\">Ukrainian</option>\r\n                <option value=\"Polish\">Polish</option>\r\n                <option value=\"German\">German</option>\r\n                <option value=\"Spanish\">Spanish</option>\r\n                <option value=\"French\">French</option>\r\n                <option value=\"Italian\">Italian</option>\r\n                <option value=\"Portuguese\">Portuguese</option>\r\n                <option value=\"Russian\">Russian</option>\r\n                <option value=\"Turkish\">Turkish</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"pt-1\">\r\n            <Button\r\n              type=\"button\"\r\n              disabled={loading}\r\n              onClick={() => void handleSummarize()}\r\n              className=\"px-5\"\r\n            >\r\n              {loading ? \"Summarizing...\" : \"Summarize\"}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* right: result */}\r\n        <div className=\"flex flex-col gap-3\">\r\n          <div className=\"flex items-center justify-between text-xs text-slate-400\">\r\n            <span>Summary</span>\r\n          </div>\r\n\r\n          <div className=\"h-44 md:h-56 rounded-xl border border-slate-700 bg-slate-950/50 p-3 text-sm text-slate-100 overflow-auto\">\r\n            {out ? (\r\n              <div className=\"whitespace-pre-wrap break-words\">{out}</div>\r\n            ) : (\r\n              <span className=\"text-slate-500\">Summary will appear here‚Ä¶</span>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mt-1 text-[11px] text-slate-500 flex flex-wrap gap-3\">\r\n            <span>\r\n              Style: <span className=\"text-slate-300\">{style}</span>\r\n            </span>\r\n            <span>\r\n              Language: <span className=\"text-slate-300\">{lang}</span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-3\">\r\n        {provider && (\r\n          <span className=\"rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-xs text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300\">\r\n            via {provider}\r\n          </span>\r\n        )}\r\n        {error && <p className=\"text-xs text-slate-400\">{error}</p>}\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport const Summarizer = withLicenseGuard(SummarizerInner, {\r\n  title: \"Summarizer (Pro)\",\r\n  message:\r\n    \"Summarizer is available only with a valid @mrszlv/ai-ui-components license.\",\r\n});\r\n","import React, { useState } from \"react\";\r\n\r\nimport { useAI } from \"../../lib/ai/useAI\";\r\nimport { withLicenseGuard } from \"../../lib/licensing/withLicenseGuard\";\r\n\r\nimport { Button } from \"../ui/Button\";\r\nimport { Card } from \"../ui/Card\";\r\n\r\nfunction buildPrompt(text: string, from: string, to: string) {\r\n  return [\r\n    `You are a precise translator from ${from} to ${to}.`,\r\n    \"Rules:\",\r\n    \"- Respond strictly in the target language.\",\r\n    \"- Preserve meaning, tone, and named entities.\",\r\n    \"- Keep emojis, punctuation, and Markdown structure.\",\r\n    \"- Do NOT translate code, URLs, or domain names.\",\r\n    \"- Keep line breaks and formatting.\",\r\n    \"\",\r\n    \"Text:\",\r\n    text,\r\n  ].join(\"\\n\");\r\n}\r\n\r\nconst TranslatorInner: React.FC = () => {\r\n  const { streamGenerate, loading, error, provider } = useAI();\r\n\r\n  const [from, setFrom] = useState(\"Ukrainian\");\r\n  const [to, setTo] = useState(\"English\");\r\n\r\n  const [src, setSrc] = useState(\"\");\r\n  const [out, setOut] = useState(\"\");\r\n\r\n  async function handleTranslate() {\r\n    const text = src.trim();\r\n    if (!text) return;\r\n\r\n    const prompt = buildPrompt(text, from, to);\r\n    setOut(\"\");\r\n\r\n    await streamGenerate(prompt, {\r\n      onToken: (token: string) => {\r\n        setOut((prev) => prev + token);\r\n      },\r\n      onDone: () => {\r\n        // no-op for now\r\n      },\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Card className=\"max-w-5xl mx-auto space-y-5 bg-slate-950/70 border-slate-800\">\r\n      {/* header */}\r\n      <div className=\"flex items-center justify-between gap-3\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"inline-flex h-7 w-7 items-center justify-center rounded-full bg-sky-500/20 text-sky-300\">\r\n            üåç\r\n          </span>\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-slate-50\">Translator</h3>\r\n            <p className=\"text-xs text-slate-400\">\r\n              Translate text between languages with AI.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* main grid */}\r\n      <div className=\"grid gap-4 md:grid-cols-2 md:items-start\">\r\n        {/* left: source */}\r\n        <div className=\"flex flex-col gap-3\">\r\n          <div className=\"flex items-center justify-between text-xs text-slate-400\">\r\n            <span>Source text</span>\r\n            <span className=\"opacity-60\">\r\n              {src.trim().length ? `${src.trim().length} chars` : \"Paste text‚Ä¶\"}\r\n            </span>\r\n          </div>\r\n\r\n          <textarea\r\n            className=\"h-44 md:h-56 w-full resize-none rounded-xl border border-slate-700 bg-slate-950/70 p-3 text-sm text-slate-100 outline-none placeholder:text-slate-500 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40\"\r\n            value={src}\r\n            onChange={(e) => setSrc(e.target.value)}\r\n            placeholder=\"Type or paste text to translate...\"\r\n          />\r\n\r\n          {/* controls */}\r\n          <div className=\"flex flex-wrap items-center gap-3 text-xs text-slate-400\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span>From:</span>\r\n              <select\r\n                title=\"select translator\"\r\n                className=\"rounded-lg border border-slate-700 bg-slate-900 px-2 py-1 text-xs text-slate-100\"\r\n                value={from}\r\n                onChange={(e) => setFrom(e.target.value)}\r\n              >\r\n                <option value=\"English\">English</option>\r\n                <option value=\"Ukrainian\">Ukrainian</option>\r\n                <option value=\"Polish\">Polish</option>\r\n                <option value=\"German\">German</option>\r\n                <option value=\"Spanish\">Spanish</option>\r\n                <option value=\"French\">French</option>\r\n                <option value=\"Italian\">Italian</option>\r\n                <option value=\"Portuguese\">Portuguese</option>\r\n                <option value=\"Russian\">Russian</option>\r\n                <option value=\"Turkish\">Turkish</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              <span>To:</span>\r\n              <select\r\n                title=\"select translator\"\r\n                className=\"rounded-lg border border-slate-700 bg-slate-900 px-2 py-1 text-xs text-slate-100\"\r\n                value={to}\r\n                onChange={(e) => setTo(e.target.value)}\r\n              >\r\n                <option value=\"English\">English</option>\r\n                <option value=\"Ukrainian\">Ukrainian</option>\r\n                <option value=\"Polish\">Polish</option>\r\n                <option value=\"German\">German</option>\r\n                <option value=\"Spanish\">Spanish</option>\r\n                <option value=\"French\">French</option>\r\n                <option value=\"Italian\">Italian</option>\r\n                <option value=\"Portuguese\">Portuguese</option>\r\n                <option value=\"Russian\">Russian</option>\r\n                <option value=\"Turkish\">Turkish</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"pt-1\">\r\n            <Button\r\n              type=\"button\"\r\n              disabled={loading}\r\n              onClick={() => void handleTranslate()}\r\n              className=\"px-5\"\r\n            >\r\n              {loading ? \"Translating...\" : \"Translate\"}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* right: result */}\r\n        <div className=\"flex flex-col gap-3\">\r\n          <div className=\"flex items-center justify-between text-xs text-slate-400\">\r\n            <span>Translation</span>\r\n          </div>\r\n\r\n          <div className=\"h-44 md:h-56 rounded-xl border border-slate-700 bg-slate-950/50 p-3 text-sm text-slate-100 overflow-auto\">\r\n            {out ? (\r\n              <div className=\"whitespace-pre-wrap break-words\">{out}</div>\r\n            ) : (\r\n              <span className=\"text-slate-500\">\r\n                Translation will appear here‚Ä¶\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mt-1 text-[11px] text-slate-500 flex flex-wrap gap-3\">\r\n            <span>\r\n              From: <span className=\"text-slate-300\">{from}</span>\r\n            </span>\r\n            <span>\r\n              To: <span className=\"text-slate-300\">{to}</span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-3\">\r\n        {provider && (\r\n          <span className=\"rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-xs text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300\">\r\n            via {provider}\r\n          </span>\r\n        )}\r\n        {error && <p className=\"text-xs text-slate-400\">{error}</p>}\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport const Translator = withLicenseGuard(TranslatorInner, {\r\n  title: \"Translator (Pro)\",\r\n  message:\r\n    \"Translator is available only with a valid @mrszlv/ai-ui-components license.\",\r\n});\r\n","import React, { useMemo, useState } from \"react\";\r\n\r\nimport { useAI } from \"../../lib/ai/useAI\";\r\nimport { withLicenseGuard } from \"../../lib/licensing/withLicenseGuard\";\r\n\r\nimport { Button } from \"../ui/Button\";\r\nimport { Card } from \"../ui/Card\";\r\n\r\ntype Tone =\r\n  | \"neutral\"\r\n  | \"formal\"\r\n  | \"casual\"\r\n  | \"friendly\"\r\n  | \"professional\"\r\n  | \"confident\";\r\n\r\ntype Length = \"shorter\" | \"same\" | \"longer\";\r\n\r\ntype Creativity = \"low\" | \"medium\" | \"high\";\r\n\r\nfunction buildPrompt(\r\n  text: string,\r\n  opts: {\r\n    tone: Tone;\r\n    length: Length;\r\n    creativity: Creativity;\r\n    targetLanguage?: string | \"auto\";\r\n  }\r\n) {\r\n  const toneLine: Record<Tone, string> = {\r\n    neutral: \"Use a clear, neutral tone.\",\r\n    formal:\r\n      \"Use a formal, concise tone suitable for business/academic contexts.\",\r\n    casual: \"Use a casual, conversational tone.\",\r\n    friendly: \"Use a warm, friendly tone.\",\r\n    professional: \"Use a professional, confident tone.\",\r\n    confident: \"Use a bold, confident tone.\",\r\n  };\r\n\r\n  const lengthLine: Record<Length, string> = {\r\n    shorter: \"Make it more concise while preserving meaning.\",\r\n    same: \"Keep approximately the same length.\",\r\n    longer: \"Expand with a bit more detail while staying on-topic.\",\r\n  };\r\n\r\n  const creativityLine: Record<Creativity, string> = {\r\n    low: \"Keep wording very close to the original.\",\r\n    medium: \"Improve clarity and flow while preserving meaning.\",\r\n    high: \"Be more creative with wording, but keep the same core message.\",\r\n  };\r\n\r\n  const lang =\r\n    opts.targetLanguage && opts.targetLanguage !== \"auto\"\r\n      ? `Rewrite in ${opts.targetLanguage}.`\r\n      : \"Keep the original language.\";\r\n\r\n  return [\r\n    \"You are a professional copy editor.\",\r\n    toneLine[opts.tone],\r\n    lengthLine[opts.length],\r\n    creativityLine[opts.creativity],\r\n    lang,\r\n    \"\",\r\n    \"Text:\",\r\n    text,\r\n  ].join(\"\\n\");\r\n}\r\n\r\nconst RewriterInner: React.FC = () => {\r\n  const { streamGenerate, loading, error, provider } = useAI();\r\n\r\n  const [src, setSrc] = useState(\"\");\r\n  const [out, setOut] = useState(\"\");\r\n\r\n  const [tone, setTone] = useState<Tone>(\"neutral\");\r\n  const [length, setLength] = useState<Length>(\"same\");\r\n  const [creativity, setCreativity] = useState<Creativity>(\"medium\");\r\n  const [lang, setLang] = useState<string | \"auto\">(\"auto\");\r\n\r\n  const prompt = useMemo(\r\n    () =>\r\n      buildPrompt(src, {\r\n        tone,\r\n        length,\r\n        creativity,\r\n        targetLanguage: lang,\r\n      }),\r\n    [src, tone, length, creativity, lang]\r\n  );\r\n\r\n  async function handleRewrite() {\r\n    const text = src.trim();\r\n    if (!text) return;\r\n\r\n    setOut(\"\");\r\n\r\n    await streamGenerate(prompt, {\r\n      onToken: (token: string) => {\r\n        setOut((prev) => prev + token);\r\n      },\r\n      onDone: () => {\r\n        // nothing extra for now\r\n      },\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Card className=\"max-w-5xl mx-auto space-y-5 bg-slate-950/70 border-slate-800\">\r\n      {/* header */}\r\n      <div className=\"flex items-center justify-between gap-3\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"inline-flex h-7 w-7 items-center justify-center rounded-full bg-rose-500/20 text-rose-300\">\r\n            ‚úèÔ∏è\r\n          </span>\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-slate-50\">Rewriter</h3>\r\n            <p className=\"text-xs text-slate-400\">\r\n              Improve tone, clarity and style of your text.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* main grid */}\r\n      <div className=\"grid gap-4 md:grid-cols-2 md:items-start\">\r\n        {/* left: source */}\r\n        <div className=\"flex flex-col gap-3\">\r\n          <div className=\"flex items-center justify-between text-xs text-slate-400\">\r\n            <span>Original text</span>\r\n            <span className=\"opacity-60\">\r\n              {src.trim().length ? `${src.trim().length} chars` : \"Paste text‚Ä¶\"}\r\n            </span>\r\n          </div>\r\n\r\n          <textarea\r\n            className=\"h-44 md:h-56 w-full resize-none rounded-xl border border-slate-700 bg-slate-950/70 p-3 text-sm text-slate-100 outline-none placeholder:text-slate-500 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40\"\r\n            value={src}\r\n            onChange={(e) => setSrc(e.target.value)}\r\n            placeholder=\"Paste text to rewrite...\"\r\n          />\r\n\r\n          {/* controls */}\r\n          <div className=\"flex flex-wrap items-center gap-3 text-xs text-slate-400\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span>Tone:</span>\r\n              <select\r\n                title=\"Select tone\"\r\n                className=\"rounded-lg border border-slate-700 bg-slate-900 px-2 py-1 text-xs text-slate-100\"\r\n                value={tone}\r\n                onChange={(e) => setTone(e.target.value as Tone)}\r\n              >\r\n                <option value=\"neutral\">Neutral</option>\r\n                <option value=\"formal\">Formal</option>\r\n                <option value=\"casual\">Casual</option>\r\n                <option value=\"friendly\">Friendly</option>\r\n                <option value=\"professional\">Professional</option>\r\n                <option value=\"confident\">Confident</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              <span>Length:</span>\r\n              <select\r\n                title=\"Select tone\"\r\n                className=\"rounded-lg border border-slate-700 bg-slate-900 px-2 py-1 text-xs text-slate-100\"\r\n                value={length}\r\n                onChange={(e) => setLength(e.target.value as Length)}\r\n              >\r\n                <option value=\"shorter\">Shorter</option>\r\n                <option value=\"same\">Same</option>\r\n                <option value=\"longer\">Longer</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              <span>Creativity:</span>\r\n              <select\r\n                title=\"Select tone\"\r\n                className=\"rounded-lg border border-slate-700 bg-slate-900 px-2 py-1 text-xs text-slate-100\"\r\n                value={creativity}\r\n                onChange={(e) => setCreativity(e.target.value as Creativity)}\r\n              >\r\n                <option value=\"low\">Low</option>\r\n                <option value=\"medium\">Medium</option>\r\n                <option value=\"high\">High</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              <span>Language:</span>\r\n              <select\r\n                title=\"Select tone\"\r\n                className=\"rounded-lg border border-slate-700 bg-slate-900 px-2 py-1 text-xs text-slate-100\"\r\n                value={lang}\r\n                onChange={(e) => setLang(e.target.value as string | \"auto\")}\r\n              >\r\n                <option value=\"auto\">Auto</option>\r\n                <option value=\"English\">English</option>\r\n                <option value=\"Ukrainian\">Ukrainian</option>\r\n                <option value=\"Polish\">Polish</option>\r\n                <option value=\"German\">German</option>\r\n                <option value=\"Spanish\">Spanish</option>\r\n                <option value=\"French\">French</option>\r\n                <option value=\"Italian\">Italian</option>\r\n                <option value=\"Portuguese\">Portuguese</option>\r\n                <option value=\"Russian\">Russian</option>\r\n                <option value=\"Turkish\">Turkish</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"pt-1\">\r\n            <Button\r\n              type=\"button\"\r\n              disabled={loading}\r\n              onClick={() => void handleRewrite()}\r\n              className=\"px-5\"\r\n            >\r\n              {loading ? \"Rewriting...\" : \"Rewrite\"}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* right: result */}\r\n        <div className=\"flex flex-col gap-3\">\r\n          <div className=\"flex items-center justify-between text-xs text-slate-400\">\r\n            <span>Result</span>\r\n          </div>\r\n\r\n          <div className=\"h-44 md:h-56 rounded-xl border border-slate-700 bg-slate-950/50 p-3 text-sm text-slate-100 overflow-auto\">\r\n            {out ? (\r\n              <div className=\"whitespace-pre-wrap break-words\">{out}</div>\r\n            ) : (\r\n              <span className=\"text-slate-500\">\r\n                Rewritten text will appear here‚Ä¶\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          {/* –ø–æ–∫–∞–∑—É—î–º–æ –ø–æ—Ç–æ—á–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º */}\r\n          <div className=\"mt-1 text-[11px] text-slate-500 flex flex-wrap gap-3\">\r\n            <span>\r\n              Tone: <span className=\"text-slate-300 capitalize\">{tone}</span>\r\n            </span>\r\n            <span>\r\n              Length:{\" \"}\r\n              <span className=\"text-slate-300 capitalize\">{length}</span>\r\n            </span>\r\n            <span>\r\n              Creativity:{\" \"}\r\n              <span className=\"text-slate-300 capitalize\">{creativity}</span>\r\n            </span>\r\n            <span>\r\n              Language:{\" \"}\r\n              <span className=\"text-slate-300\">\r\n                {lang === \"auto\" ? \"Auto\" : lang}\r\n              </span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-3\">\r\n        {provider && (\r\n          <span className=\"rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-xs text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300\">\r\n            via {provider}\r\n          </span>\r\n        )}\r\n        {error && <p className=\"text-xs text-slate-400\">{error}</p>}\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport const Rewriter = withLicenseGuard(RewriterInner, {\r\n  title: \"Rewriter (Pro)\",\r\n  message:\r\n    \"Rewriter is available only with a valid @mrszlv/ai-ui-components license.\",\r\n});\r\n","import React, { useMemo, useState } from \"react\";\r\nimport type { PropsWithChildren } from \"react\";\r\n\r\nimport { AIContext, type AIContextType, type ProviderName } from \"./AIContext\";\r\nimport type { AIClient } from \"./types\";\r\nimport { OpenAIClient } from \"./clients/openai\";\r\nimport { GroqClient } from \"./clients/groq\";\r\n\r\ntype EnvLike = Record<string, string | undefined>;\r\n\r\ntype AIProviderProps = PropsWithChildren<{\r\n  openaiKey?: string;\r\n  openaiModel?: string;\r\n  groqKey?: string;\r\n  groqModel?: string;\r\n  initialProvider?: ProviderName;\r\n}>;\r\n\r\nconst DEFAULT_OPENAI_MODEL = \"gpt-4o-mini\";\r\nconst DEFAULT_GROQ_MODEL = \"llama-3.1-8b-instant\";\r\n\r\nfunction fromVite(name: string): string | undefined {\r\n  // –±–µ–∑ any —Ç–∞ –±–µ–∑ –ø–æ—Ä–æ–∂–Ω—ñ—Ö –±–ª–æ–∫—ñ–≤\r\n  const env = (import.meta as unknown as { env?: EnvLike }).env;\r\n  return env ? env[name] : undefined;\r\n}\r\n\r\nfunction fromNode(name: string): string | undefined {\r\n  const env =\r\n    typeof process !== \"undefined\"\r\n      ? (process as unknown as { env?: EnvLike }).env\r\n      : undefined;\r\n  return env ? env[name] : undefined;\r\n}\r\n\r\nfunction fromGlobal(name: string): string | undefined {\r\n  const env = (globalThis as unknown as { __AIUI_ENV?: EnvLike }).__AIUI_ENV;\r\n  return env ? env[name] : undefined;\r\n}\r\n\r\nfunction readEnv(name: string): string | undefined {\r\n  return fromVite(name) ?? fromNode(name) ?? fromGlobal(name);\r\n}\r\n\r\nconst AIProvider: React.FC<AIProviderProps> = ({\r\n  children,\r\n  openaiKey,\r\n  openaiModel,\r\n  groqKey,\r\n  groqModel,\r\n  initialProvider,\r\n}) => {\r\n  const [provider, setProvider] = useState<ProviderName>(\r\n    initialProvider ?? (readEnv(\"VITE_AI_PROVIDER\") as ProviderName) ?? \"openai\"\r\n  );\r\n\r\n  // props ‚Üí env\r\n  const resolvedOpenAIKey = openaiKey ?? readEnv(\"VITE_OPENAI_KEY\");\r\n  const resolvedGroqKey = groqKey ?? readEnv(\"VITE_GROQ_KEY\");\r\n  const resolvedOpenAIModel =\r\n    openaiModel ?? readEnv(\"VITE_OPENAI_MODEL\") ?? DEFAULT_OPENAI_MODEL;\r\n  const resolvedGroqModel =\r\n    groqModel ?? readEnv(\"VITE_GROQ_MODEL\") ?? DEFAULT_GROQ_MODEL;\r\n\r\n  const value = useMemo<AIContextType>(() => {\r\n    const openai: AIClient | null = resolvedOpenAIKey\r\n      ? new OpenAIClient(resolvedOpenAIKey)\r\n      : null;\r\n    const groq: AIClient | null = resolvedGroqKey\r\n      ? new GroqClient(resolvedGroqKey)\r\n      : null;\r\n\r\n    const active: AIClient | null =\r\n      provider === \"groq\" ? groq ?? openai : openai ?? groq;\r\n\r\n    const backup: AIClient | undefined =\r\n      provider === \"groq\" ? openai ?? undefined : groq ?? undefined;\r\n\r\n    const defaultModel =\r\n      provider === \"groq\" ? resolvedGroqModel : resolvedOpenAIModel;\r\n\r\n    if (!active) {\r\n      throw new Error(\r\n        \"No AI client configured. Pass keys via props (openaiKey/groqKey) –∞–±–æ –≤—Å—Ç–∞–Ω–æ–≤–∏ VITE_OPENAI_KEY / VITE_GROQ_KEY.\"\r\n      );\r\n    }\r\n\r\n    return {\r\n      client: active,\r\n      fallback: backup,\r\n      defaultModel,\r\n      provider,\r\n      setProvider,\r\n    };\r\n  }, [\r\n    provider,\r\n    resolvedOpenAIKey,\r\n    resolvedGroqKey,\r\n    resolvedOpenAIModel,\r\n    resolvedGroqModel,\r\n  ]);\r\n\r\n  return <AIContext.Provider value={value}>{children}</AIContext.Provider>;\r\n};\r\n\r\nexport default AIProvider;\r\n","// –ø—É–±–ª—ñ—á–Ω—ñ –µ–∫—Å–ø–æ—Ä—Ç–∏ –∑ –ª—ñ–±–∏\r\nexport * from \"./lib/ai/types\";\r\nexport * from \"./lib/ai/AIContext\";\r\nexport * from \"./lib/ai/useAI\";\r\n\r\nexport * from \"./lib/licensing/LicenseContext\";\r\nexport { LicenseProvider } from \"./lib/licensing/LicenseProvider\";\r\nexport { useLicense } from \"./lib/licensing/LicenseContext\";\r\n\r\nexport * from \"./lib/ai/clients/openai\";\r\nexport * from \"./lib/ai/clients/groq\";\r\nexport * from \"./lib/ai/utils/sse\";\r\n\r\nexport * from \"./components/ui/Button\";\r\nexport * from \"./components/ui/Card\";\r\n\r\n// —ñ–º–µ–Ω–æ–≤–∞–Ω—ñ –µ–∫—Å–ø–æ—Ä—Ç–∏ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤\r\nexport { ChatBox } from \"./components/ChatBox/ChatBox\";\r\nexport { Summarizer } from \"./components/Summarizer/Summarizer\";\r\nexport { Translator } from \"./components/Translator/Translator\";\r\nexport { Rewriter } from \"./components/Rewriter/Rewriter\";\r\n\r\n// üëá –æ—Å—å —Ç—É—Ç –≥–æ–ª–æ–≤–Ω–µ: –º–∏ –∑–Ω–∞—î–º–æ, —â–æ AIProvider ‚Äî –¥–µ—Ñ–æ–ª—Ç–Ω–∏–π –≤ AIProvider.tsx\r\nimport AIProviderDefault from \"./lib/ai/AIProvider\";\r\nimport { LicenseProvider } from \"./lib/licensing/LicenseProvider\";\r\n\r\n// –¥–∞—î–º–æ –π–æ–º—É —ñ–º–µ–Ω–æ–≤–∞–Ω–∏–π –µ–∫—Å–ø–æ—Ä—Ç –∑ –ø–∞–∫–µ—Ç–∞\r\nexport { AIProviderDefault as AIProvider };\r\n\r\n// –¥–∞–ª—ñ ‚Äî —ñ–º–ø–æ—Ä—Ç–∏ —Ç—ñ–ª—å–∫–∏ —â–æ–± –∑—ñ–±—Ä–∞—Ç–∏ –¥–µ—Ñ–æ–ª—Ç–Ω–∏–π –æ–±‚Äô—î–∫—Ç\r\nimport { ChatBox as ChatBoxComp } from \"./components/ChatBox/ChatBox\";\r\nimport { Summarizer as SummarizerComp } from \"./components/Summarizer/Summarizer\";\r\nimport { Translator as TranslatorComp } from \"./components/Translator/Translator\";\r\nimport { Rewriter as RewriterComp } from \"./components/Rewriter/Rewriter\";\r\nimport { useAI as useAIHook } from \"./lib/ai/useAI\";\r\n\r\nconst AIUI = {\r\n  ChatBox: ChatBoxComp,\r\n  Summarizer: SummarizerComp,\r\n  Translator: TranslatorComp,\r\n  Rewriter: RewriterComp,\r\n  AIProvider: AIProviderDefault,\r\n  LicenseProvider,\r\n  useAI: useAIHook,\r\n};\r\n\r\nexport default AIUI;\r\n"],"mappings":";;;;;AAAA,OAAO,SAAS,eAAe,kBAAkB;AAmB1C,IAAM,YAAY,cAAoC,IAAI;AAE1D,IAAM,iBAET,CAAC,EAAE,OAAO,SAAS,MAAM;AAC3B,SAAO,MAAM,cAAc,UAAU,UAAU,EAAE,MAAM,GAAG,QAAQ;AACpE;AAEO,SAAS,eAA8B;AAC5C,QAAM,MAAM,WAAW,SAAS;AAChC,MAAI,CAAC,IAAK,OAAM,IAAI,MAAM,+CAA+C;AACzE,SAAO;AACT;;;AC/BA,SAAS,gBAAgB;AAIlB,SAAS,MAAM,cAAuB;AAC3C,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA,cAAc;AAAA,IACd;AAAA,IACA;AAAA,EACF,IAAI,aAAa;AACjB,QAAM,QAAQ,gBAAgB;AAE9B,QAAM,CAAC,SAAS,UAAU,IAAI,SAAS,KAAK;AAC5C,QAAM,CAAC,OAAO,QAAQ,IAAI,SAAwB,IAAI;AAEtD,iBAAe,aACb,IACY;AACZ,QAAI;AACF,aAAO,MAAM,GAAG,MAAM;AAAA,IACxB,SAAS,GAAY;AACnB,YAAM,UACJ,aAAa,QAAQ,EAAE,UAAU,OAAO,KAAK,eAAe;AAE9D,UAAI,YAAY,aAAa,UAAU;AACrC,cAAM,iBAAiB,0CAA0C;AAAA,UAC/D;AAAA,QACF;AACA,YAAI,gBAAgB;AAClB,sBAAY,MAAM;AAClB,mBAAS,kCAAkC;AAC3C,iBAAO,MAAM,GAAG,QAAQ;AAAA,QAC1B;AAAA,MACF;AAEA,YAAM,aAAa,QAAQ,IAAI,IAAI,MAAM,OAAO,CAAC,CAAC;AAAA,IACpD;AAAA,EACF;AAEA,iBAAe,KAAK,UAAuB,cAAc,KAAK;AAC5D,eAAW,IAAI;AACf,aAAS,IAAI;AACb,QAAI;AACF,aAAO,MAAM;AAAA,QAAa,CAAC,MACzB,EAAE,KAAK,EAAE,OAAO,UAAU,YAAY,CAAC;AAAA,MACzC;AAAA,IACF,SAAS,GAAY;AACnB,eAAS,aAAa,QAAQ,EAAE,UAAU,OAAO,KAAK,eAAe,CAAC;AACtE,aAAO;AAAA,IACT,UAAE;AACA,iBAAW,KAAK;AAAA,IAClB;AAAA,EACF;AAEA,iBAAe,SAAS,QAAgB,cAAc,KAAK;AACzD,eAAW,IAAI;AACf,aAAS,IAAI;AACb,QAAI;AACF,aAAO,MAAM;AAAA,QAAa,CAAC,MACzB,EAAE,SAAS,EAAE,OAAO,QAAQ,YAAY,CAAC;AAAA,MAC3C;AAAA,IACF,SAAS,GAAY;AACnB,eAAS,aAAa,QAAQ,EAAE,UAAU,OAAO,KAAK,eAAe,CAAC;AACtE,aAAO;AAAA,IACT,UAAE;AACA,iBAAW,KAAK;AAAA,IAClB;AAAA,EACF;AAEA,iBAAe,eACb,QACA,UAIA,cAAc,KACd;AACA,eAAW,IAAI;AACf,aAAS,IAAI;AACb,QAAI;AACF,YAAM;AAAA,QAAa,CAAC,MAClB,EAAE,eAAe,QAAQ,UAAU,EAAE,OAAO,YAAY,CAAC;AAAA,MAC3D;AAAA,IACF,SAAS,GAAY;AACnB,eAAS,aAAa,QAAQ,EAAE,UAAU,OAAO,KAAK,eAAe,CAAC;AAAA,IACxE,UAAE;AACA,iBAAW,KAAK;AAAA,IAClB;AAAA,EACF;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IAEA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;;;ACrGA,SAAS,iBAAAA,gBAAe,cAAAC,mBAAkB;AAGnC,IAAM,iBAAiBD,eAA4B;AAAA,EACxD,KAAK;AAAA,EACL,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,SAAS;AAAA,EACT,OAAO;AACT,CAAC;AAEM,SAAS,aAA2B;AACzC,SAAOC,YAAW,cAAc;AAClC;;;ACbA,SAAgB,eAAe;;;ACA/B,OAAO,UAAU;AAIjB,IAAM,oBAAoB;AAE1B,SAAS,0BAA0B,QAAmC;AACpE,MAAI;AACF,UAAM,KAAK,UAAU,IAAI,KAAK;AAC9B,QAAI,CAAC,KAAK,CAAC,mBAAmB,KAAK,CAAC,EAAG,QAAO;AAE9C,UAAM,MAAM,EAAE,QAAQ,MAAM,GAAG,EAAE,QAAQ,MAAM,GAAG;AAClD,UAAM,MAAM,IAAI,SAAS,IAAI,IAAI,OAAO,IAAK,IAAI,SAAS,CAAE,IAAI;AAChE,UAAM,QAAQ,MAAM;AAEpB,UAAM,SAAS,KAAK,KAAK;AACzB,UAAM,QAAQ,IAAI,WAAW,OAAO,MAAM;AAC1C,aAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,IAAK,OAAM,CAAC,IAAI,OAAO,WAAW,CAAC;AACtE,WAAO;AAAA,EACT,QAAQ;AACN,WAAO;AAAA,EACT;AACF;AAEA,SAAS,oBAAoB,GAAoB;AAC/C,SAAO,sBAAsB,KAAK,CAAC;AACrC;AAEA,SAAS,gBAAwB;AAC/B,QAAM,IAAI,oBAAI,KAAK;AACnB,QAAM,OAAO,EAAE,YAAY;AAC3B,QAAM,KAAK,OAAO,EAAE,SAAS,IAAI,CAAC,EAAE,SAAS,GAAG,GAAG;AACnD,QAAM,KAAK,OAAO,EAAE,QAAQ,CAAC,EAAE,SAAS,GAAG,GAAG;AAC9C,SAAO,GAAG,IAAI,IAAI,EAAE,IAAI,EAAE;AAC5B;AAEA,SAAS,UAAU,aAA8B;AAC/C,SAAO,cAAc,cAAc;AACrC;AAEA,SAAS,aACP,KACiD;AACjD,MAAI,CAAC,IAAI,WAAW,UAAU,EAAG,QAAO;AAExC,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,MAAI,MAAM,WAAW,EAAG,QAAO;AAE/B,QAAM,eAAe,0BAA0B,MAAM,CAAC,CAAC;AACvD,QAAM,WAAW,0BAA0B,MAAM,CAAC,CAAC;AAEnD,MAAI,CAAC,gBAAgB,CAAC,SAAU,QAAO;AACvC,MAAI,SAAS,WAAW,GAAI,QAAO;AAEnC,QAAM,cAAc,IAAI,YAAY,EAAE,OAAO,YAAY;AACzD,SAAO,EAAE,aAAa,KAAK,SAAS;AACtC;AAMO,SAAS,cAAc,KAAmC;AAC/D,QAAM,IAAI,KAAK,KAAK;AACpB,MAAI,CAAC,EAAG,QAAO,EAAE,OAAO,OAAO,SAAS,MAAM,OAAO,SAAS;AAG9D,MAAI,EAAE,WAAW,cAAc,GAAG;AAChC,WAAO;AAAA,MACL,OAAO;AAAA,MACP,SAAS;AAAA,QACP,OAAO;AAAA,QACP,MAAM;AAAA,QACN,KAAK;AAAA,QACL,KAAK,cAAc;AAAA,MACrB;AAAA,MACA,OAAO;AAAA,IACT;AAAA,EACF;AAEA,QAAM,SAAS,aAAa,CAAC;AAC7B,MAAI,CAAC,OAAQ,QAAO,EAAE,OAAO,OAAO,SAAS,MAAM,OAAO,aAAa;AAEvE,MAAI;AACJ,MAAI;AACF,cAAU,KAAK,MAAM,OAAO,WAAW;AAAA,EACzC,QAAQ;AACN,WAAO,EAAE,OAAO,OAAO,SAAS,MAAM,OAAO,mBAAmB;AAAA,EAClE;AAEA,MAAI,CAAC,SAAS,SAAS,CAAC,SAAS,QAAQ,CAAC,SAAS,OAAO,CAAC,SAAS,KAAK;AACvE,WAAO,EAAE,OAAO,OAAO,SAAS,MAAM,OAAO,iBAAiB;AAAA,EAChE;AAEA,MAAI,QAAQ,SAAS,SAAS,QAAQ,SAAS,QAAQ;AACrD,WAAO,EAAE,OAAO,OAAO,SAAS,MAAM,OAAO,WAAW;AAAA,EAC1D;AAEA,MAAI,CAAC,oBAAoB,QAAQ,GAAG,KAAK,CAAC,oBAAoB,QAAQ,GAAG,GAAG;AAC1E,WAAO,EAAE,OAAO,OAAO,SAAS,MAAM,OAAO,WAAW;AAAA,EAC1D;AAEA,MAAI,UAAU,QAAQ,GAAG,GAAG;AAC1B,WAAO,EAAE,OAAO,OAAO,SAAS,MAAM,OAAO,UAAU;AAAA,EACzD;AAEA,QAAM,YAAY,0BAA0B,iBAAiB;AAC7D,MAAI,CAAC,aAAa,UAAU,WAAW,IAAI;AACzC,WAAO,EAAE,OAAO,OAAO,SAAS,MAAM,OAAO,iBAAiB;AAAA,EAChE;AAEA,QAAM,eAAe,IAAI,YAAY,EAAE,OAAO,OAAO,WAAW;AAEhE,QAAM,KAAK,KAAK,KAAK,SAAS,OAAO,cAAc,OAAO,KAAK,SAAS;AACxE,MAAI,CAAC,GAAI,QAAO,EAAE,OAAO,OAAO,SAAS,MAAM,OAAO,gBAAgB;AAEtE,SAAO,EAAE,OAAO,MAAM,SAAS,OAAO,KAAK;AAC7C;;;ADzFI;AAlBG,SAAS,gBAAgB;AAAA,EAC9B;AAAA,EACA;AACF,GAAyB;AACvB,QAAM,QAAQ,QAAsB,MAAM;AACxC,UAAM,MAAM,cAAc,UAAU;AAEpC,UAAM,QAAQ,IAAI;AAClB,WAAO;AAAA,MACL,KAAK,YAAY,KAAK;AAAA,MACtB;AAAA,MACA,QAAQ,QAAQ,UAAU;AAAA,MAC1B,SAAS,QAAQ,IAAI,UAAU;AAAA,MAC/B,OAAO,QAAQ,OAAO,IAAI;AAAA,IAC5B;AAAA,EACF,GAAG,CAAC,UAAU,CAAC;AAEf,SACE,oBAAC,eAAe,UAAf,EAAwB,OAAO,OAAQ,UAAS;AAErD;;;AE9BA,eAAsB,cACpB,KACA,SACiB;AACjB,QAAM,SAAS,IAAI,KAAM,UAAU;AACnC,QAAM,UAAU,IAAI,YAAY,OAAO;AACvC,MAAI,SAAS;AACb,MAAI,OAAO;AAEX,SAAO,MAAM;AACX,UAAM,EAAE,MAAM,MAAM,IAAI,MAAM,OAAO,KAAK;AAC1C,QAAI,KAAM;AACV,cAAU,QAAQ,OAAO,OAAO,EAAE,QAAQ,KAAK,CAAC;AAEhD,eAAW,QAAQ,OAAO,MAAM,IAAI,GAAG;AACrC,UAAI,CAAC,KAAM;AACX,UAAI,KAAK,WAAW,QAAQ,GAAG;AAC7B,cAAM,UAAU,KAAK,MAAM,CAAC,EAAE,KAAK;AACnC,YAAI,YAAY,UAAU;AACxB,mBAAS;AACT;AAAA,QACF;AACA,YAAI;AACF,gBAAM,OAAO,KAAK,MAAM,OAAO;AAC/B,gBAAM,QACJ,KAAK,UAAU,CAAC,GAAG,OAAO,WAC1B,KAAK,UAAU,CAAC,GAAG,SAAS,WAC5B,KAAK,UAAU,CAAC,GAAG,QACnB;AACF,cAAI,OAAO;AACT,oBAAQ;AACR,oBAAQ,KAAK;AAAA,UACf;AAAA,QACF,QAAQ;AAAA,QAER;AAAA,MACF;AAAA,IACF;AAEA,aAAS,OAAO,SAAS,IAAI,IAAI,KAAK,OAAO,MAAM,IAAI,EAAE,GAAG,EAAE,KAAK;AAAA,EACrE;AAEA,SAAO;AACT;;;ACxCO,IAAM,eAAN,MAAuC;AAAA,EAK5C,YAAY,QAAgB;AAJ5B,gCAAO;AACP,wBAAQ;AACR,wBAAQ,WAAU;AAGhB,SAAK,SAAS;AAAA,EAChB;AAAA,EAEQ,QAAQ,SAAS,OAAO;AAC9B,WAAO;AAAA,MACL,gBAAgB;AAAA,MAChB,eAAe,UAAU,KAAK,MAAM;AAAA,MACpC,GAAI,SAAS,EAAE,QAAQ,oBAAoB,IAAI,CAAC;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,MAAM,SAAS,MAIZ;AACD,UAAM,MAAM,MAAM,MAAM,GAAG,KAAK,OAAO,qBAAqB;AAAA,MAC1D,QAAQ;AAAA,MACR,SAAS,KAAK,QAAQ,KAAK;AAAA,MAC3B,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO,KAAK;AAAA,QACZ,aAAa,KAAK,eAAe;AAAA,QACjC,UAAU,CAAC,EAAE,MAAM,QAAQ,SAAS,KAAK,OAAO,CAAC;AAAA,MACnD,CAAC;AAAA,IACH,CAAC;AACD,QAAI,CAAC,IAAI,GAAI,OAAM,IAAI,MAAM,MAAM,IAAI,KAAK,CAAC;AAC7C,UAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,WAAO,KAAK,UAAU,CAAC,GAAG,SAAS,WAAW;AAAA,EAChD;AAAA,EAEA,MAAM,KAAK,MAIR;AACD,UAAM,MAAM,MAAM,MAAM,GAAG,KAAK,OAAO,qBAAqB;AAAA,MAC1D,QAAQ;AAAA,MACR,SAAS,KAAK,QAAQ,KAAK;AAAA,MAC3B,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO,KAAK;AAAA,QACZ,aAAa,KAAK,eAAe;AAAA,QACjC,UAAU,KAAK;AAAA,MACjB,CAAC;AAAA,IACH,CAAC;AACD,QAAI,CAAC,IAAI,GAAI,OAAM,IAAI,MAAM,MAAM,IAAI,KAAK,CAAC;AAC7C,UAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,WAAO,KAAK,UAAU,CAAC,GAAG,SAAS,WAAW;AAAA,EAChD;AAAA,EAEA,MAAM,eACJ,QACA,UAIA,MACA;AACA,UAAM,MAAM,MAAM,MAAM,GAAG,KAAK,OAAO,qBAAqB;AAAA,MAC1D,QAAQ;AAAA,MACR,SAAS,KAAK,QAAQ,IAAI;AAAA,MAC1B,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO,MAAM,SAAS;AAAA,QACtB,aAAa,MAAM,eAAe;AAAA,QAClC,UAAU,CAAC,EAAE,MAAM,QAAQ,SAAS,OAAO,CAAC;AAAA,QAC5C,QAAQ;AAAA,MACV,CAAC;AAAA,IACH,CAAC;AACD,QAAI,CAAC,IAAI,GAAI,OAAM,IAAI,MAAM,MAAM,IAAI,KAAK,CAAC;AAE7C,UAAM,OAAO,MAAM,cAAc,KAAK,CAAC,UAAU,SAAS,UAAU,KAAK,CAAC;AAC1E,aAAS,SAAS,IAAI;AAAA,EACxB;AACF;;;AC9EO,IAAM,aAAN,MAAqC;AAAA,EAK1C,YAAY,QAAgB;AAJ5B,gCAAO;AACP,wBAAQ;AACR,wBAAQ,WAAU;AAGhB,SAAK,SAAS;AAAA,EAChB;AAAA,EAEQ,QAAQ,SAAS,OAAO;AAC9B,WAAO;AAAA,MACL,gBAAgB;AAAA,MAChB,eAAe,UAAU,KAAK,MAAM;AAAA,MACpC,GAAI,SAAS,EAAE,QAAQ,oBAAoB,IAAI,CAAC;AAAA,IAClD;AAAA,EACF;AAAA,EAEQ,SAAS,OAAe;AAC9B,WAAO,MAAM,WAAW,KAAK,KAAK,MAAM,WAAW,IAAI,IACnD,yBACA;AAAA,EACN;AAAA,EAEA,MAAM,SAAS,MAIZ;AACD,UAAM,MAAM,MAAM,MAAM,GAAG,KAAK,OAAO,qBAAqB;AAAA,MAC1D,QAAQ;AAAA,MACR,SAAS,KAAK,QAAQ,KAAK;AAAA,MAC3B,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO,KAAK,SAAS,KAAK,KAAK;AAAA,QAC/B,aAAa,KAAK,eAAe;AAAA,QACjC,UAAU,CAAC,EAAE,MAAM,QAAQ,SAAS,KAAK,OAAO,CAAC;AAAA,MACnD,CAAC;AAAA,IACH,CAAC;AACD,QAAI,CAAC,IAAI,GAAI,OAAM,IAAI,MAAM,MAAM,IAAI,KAAK,CAAC;AAC7C,UAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,WAAO,KAAK,UAAU,CAAC,GAAG,SAAS,WAAW;AAAA,EAChD;AAAA,EAEA,MAAM,KAAK,MAIR;AACD,UAAM,MAAM,MAAM,MAAM,GAAG,KAAK,OAAO,qBAAqB;AAAA,MAC1D,QAAQ;AAAA,MACR,SAAS,KAAK,QAAQ,KAAK;AAAA,MAC3B,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO,KAAK,SAAS,KAAK,KAAK;AAAA,QAC/B,aAAa,KAAK,eAAe;AAAA,QACjC,UAAU,KAAK;AAAA,MACjB,CAAC;AAAA,IACH,CAAC;AACD,QAAI,CAAC,IAAI,GAAI,OAAM,IAAI,MAAM,MAAM,IAAI,KAAK,CAAC;AAC7C,UAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,WAAO,KAAK,UAAU,CAAC,GAAG,SAAS,WAAW;AAAA,EAChD;AAAA,EAEA,MAAM,eACJ,QACA,UAIA,MACA;AACA,UAAM,MAAM,MAAM,MAAM,GAAG,KAAK,OAAO,qBAAqB;AAAA,MAC1D,QAAQ;AAAA,MACR,SAAS,KAAK,QAAQ,IAAI;AAAA,MAC1B,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO,KAAK,SAAS,MAAM,SAAS,sBAAsB;AAAA,QAC1D,aAAa,MAAM,eAAe;AAAA,QAClC,UAAU,CAAC,EAAE,MAAM,QAAQ,SAAS,OAAO,CAAC;AAAA,QAC5C,QAAQ;AAAA,MACV,CAAC;AAAA,IACH,CAAC;AACD,QAAI,CAAC,IAAI,GAAI,OAAM,IAAI,MAAM,MAAM,IAAI,KAAK,CAAC;AAE7C,UAAM,OAAO,MAAM,cAAc,KAAK,CAAC,UAAU,SAAS,UAAU,KAAK,CAAC;AAC1E,aAAS,SAAS,IAAI;AAAA,EACxB;AACF;;;ACvFA,OAAkB;;;ACAlB,SAAS,EAAE,GAAE;AAAC,MAAI,GAAE,GAAE,IAAE;AAAG,MAAG,YAAU,OAAO,KAAG,YAAU,OAAO,EAAE,MAAG;AAAA,WAAU,YAAU,OAAO,EAAE,KAAG,MAAM,QAAQ,CAAC,GAAE;AAAC,QAAI,IAAE,EAAE;AAAO,SAAI,IAAE,GAAE,IAAE,GAAE,IAAI,GAAE,CAAC,MAAI,IAAE,EAAE,EAAE,CAAC,CAAC,OAAK,MAAI,KAAG,MAAK,KAAG;AAAA,EAAE,MAAM,MAAI,KAAK,EAAE,GAAE,CAAC,MAAI,MAAI,KAAG,MAAK,KAAG;AAAG,SAAO;AAAC;AAAQ,SAAS,OAAM;AAAC,WAAQ,GAAE,GAAE,IAAE,GAAE,IAAE,IAAG,IAAE,UAAU,QAAO,IAAE,GAAE,IAAI,EAAC,IAAE,UAAU,CAAC,OAAK,IAAE,EAAE,CAAC,OAAK,MAAI,KAAG,MAAK,KAAG;AAAG,SAAO;AAAC;AAAC,IAAO,eAAQ;;;ADkB7X,gBAAAC,YAAA;AAPK,IAAM,SAA0B,CAAC;AAAA,EACtC;AAAA,EACA;AAAA,EACA;AAAA,EACA,OAAO;AAAA,EACP;AACF,MACE,gBAAAA;AAAA,EAAC;AAAA;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,IACA,WAAW;AAAA,MACT;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,IAEC;AAAA;AACH;;;AE/BF,OAAkB;AAQd,gBAAAC,YAAA;AAFG,IAAM,OAA4B,CAAC,EAAE,UAAU,YAAY,GAAG,MAAM;AACzE,SACE,gBAAAA;AAAA,IAAC;AAAA;AAAA,MACC,WAAW;AAAA,QACT;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MAEC;AAAA;AAAA,EACH;AAEJ;;;AClBA,SAAgB,WAAAC,UAAS,QAAQ,YAAAC,iBAAgB;;;ACAjD,OAAkB;;;ACAlB,OAAkB;AAsDV,gBAAAC,MAKE,YALF;AApCR,IAAM,cAAc;AACpB,IAAM,cAAc;AAEb,IAAM,cAA0C,CAAC;AAAA,EACtD,QAAQ;AAAA,EACR,UAAU;AAAA,EACV,SAAS;AAAA,EACT,UAAU;AAAA,EACV,WAAW;AAAA,EACX,aAAa;AAAA,EACb,cAAc;AAChB,MAAM;AACJ,QAAM,mBAAmB,MAAM;AAE7B,WAAO,KAAK,SAAS,UAAU,qBAAqB;AAAA,EACtD;AAEA,QAAM,aAAa,OAAO,SAAiB;AACzC,QAAI;AACF,YAAM,UAAU,UAAU,UAAU,IAAI;AAAA,IAC1C,QAAQ;AAEN,YAAM,KAAK,SAAS,cAAc,UAAU;AAC5C,SAAG,QAAQ;AACX,eAAS,KAAK,YAAY,EAAE;AAC5B,SAAG,OAAO;AACV,eAAS,YAAY,MAAM;AAC3B,eAAS,KAAK,YAAY,EAAE;AAAA,IAC9B;AAAA,EACF;AAEA,QAAM,aAAa,SAAS,UAAU;AAEtC,SACE,gBAAAA,KAAC,SAAI,WAAU,sJACb,+BAAC,SAAI,WAAU,uBACb;AAAA,oBAAAA,KAAC,QAAG,WAAU,oCAAoC,iBAAM;AAAA,IACxD,gBAAAA,KAAC,OAAE,WAAU,yBAAyB,mBAAQ;AAAA,IAC9C,gBAAAA,KAAC,OAAE,WAAU,yBAAyB,kBAAO;AAAA,IAE5C,cACC,qBAAC,SAAI,WAAU,+EACb;AAAA,sBAAAA,KAAC,UAAK,WAAU,6BAA4B,oBAAM;AAAA,MAAQ;AAAA,MACzD;AAAA,OACH,IACE;AAAA,IAEJ,qBAAC,SAAI,WAAU,0CACb;AAAA,sBAAAA;AAAA,QAAC;AAAA;AAAA,UACC,MAAK;AAAA,UACL,SAAS;AAAA,UACT,WAAU;AAAA,UAET;AAAA;AAAA,MACH;AAAA,MAEA,qBAAC,SAAI,WAAU,2DACb;AAAA,wBAAAA,KAAC,UAAK,WAAU,0DACb,sBACH;AAAA,QACA,gBAAAA;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,WAAW,UAAU;AAAA,YACpC,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,OACF;AAAA,IAEA,qBAAC,SAAI,WAAU,0DACb;AAAA,sBAAAA,KAAC,SAAI,WAAU,qDAAoD,6BAEnE;AAAA,MACA,qBAAC,QAAG,WAAU,0DACZ;AAAA,wBAAAA,KAAC,QAAG,wDAA0C;AAAA,QAC9C,qBAAC,QAAG;AAAA;AAAA,UAEF,gBAAAA,KAAC,UAAK,WAAU,yEACb,kDACH;AAAA,WACF;AAAA,QACA,gBAAAA,KAAC,QAAG,2DAA6C;AAAA,SACnD;AAAA,OACF;AAAA,KACF,GACF;AAEJ;;;AD/EQ,gBAAAC,YAAA;AAjBR,IAAM,cAAc;AAEb,SAAS,iBACd,SACA,SACa;AACb,QAAM,qBAAkC,CAAC,UAAU;AACjD,UAAM,EAAE,QAAQ,OAAO,MAAM,IAAI,WAAW;AAE5C,QAAI,WAAW,WAAY,QAAO;AAElC,QAAI,CAAC,OAAO;AACV,YAAM,QACJ,OAAO,gBAAgB,eACvB,YAAY,KAAK,SAAS;AAE5B,aACE,gBAAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,SAAS;AAAA,UAChB,SACE,SAAS,WACT;AAAA,UAEF,QACE,SAAS,UACT;AAAA,UAEF,SAAS;AAAA,UACT,UAAS;AAAA,UACT,YAAW;AAAA,UACX,aAAa,QAAQ,QAAQ;AAAA;AAAA,MAC/B;AAAA,IAEJ;AAEA,WAAO,gBAAAA,KAAC,WAAS,GAAG,OAAO;AAAA,EAC7B;AAEA,qBAAmB,cAAc,oBAC/B,QAAQ,eAAe,QAAQ,QAAQ,WACzC;AAEA,SAAO;AACT;;;ADNU,gBAAAC,MAGA,QAAAC,aAHA;AArCV,IAAM,eAAyB,MAAM;AACnC,QAAM,EAAE,MAAM,SAAS,OAAO,SAAS,IAAI,MAAM;AAEjD,QAAM,CAAC,UAAU,WAAW,IAAIC,UAAsB,CAAC,CAAC;AACxD,QAAM,CAAC,OAAO,QAAQ,IAAIA,UAAS,EAAE;AAErC,QAAM,SAAS,OAAuB,IAAI;AAE1C,QAAM,SAASC;AAAA,IACb,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,QACP;AAAA,QACA;AAAA,MACF,EAAE,KAAK,IAAI;AAAA,IACb;AAAA,IACA,CAAC;AAAA,EACH;AAEA,iBAAe,aAAa;AAC1B,UAAM,OAAO,MAAM,KAAK;AACxB,QAAI,CAAC,KAAM;AAEX,UAAM,OAAO,CAAC,GAAG,UAAU,EAAE,MAAM,QAAQ,SAAS,KAAK,CAAc;AACvE,aAAS,EAAE;AAEX,UAAM,QAAQ,MAAM,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC1C,gBAAY,CAAC,GAAG,MAAM,EAAE,MAAM,aAAa,SAAS,MAAM,CAAC,CAAC;AAE5D,WAAO,SAAS,eAAe,EAAE,UAAU,SAAS,CAAC;AAAA,EACvD;AAEA,SACE,gBAAAF,MAAC,QAAK,WAAU,gEAEd;AAAA,oBAAAD,KAAC,SAAI,WAAU,2CACb,0BAAAC,MAAC,SAAI,WAAU,2BACb;AAAA,sBAAAD,KAAC,UAAK,WAAU,iGAAgG,uBAEhH;AAAA,MACA,gBAAAC,MAAC,SACC;AAAA,wBAAAD,KAAC,QAAG,WAAU,uCAAsC,qBAAO;AAAA,QAC3D,gBAAAA,KAAC,OAAE,WAAU,0BAAyB,oDAEtC;AAAA,SACF;AAAA,OACF,GACF;AAAA,IAGA,gBAAAC;AAAA,MAAC;AAAA;AAAA,QACC,WAAW;AAAA,UACT;AAAA,UACA;AAAA,QACF;AAAA,QAEC;AAAA,mBAAS,WAAW,KACnB,gBAAAD,KAAC,SAAI,WAAU,kEAAiE,oCAEhF;AAAA,UAGD,SAAS,IAAI,CAAC,GAAG,QAChB,gBAAAA;AAAA,YAAC;AAAA;AAAA,cAEC,WAAW;AAAA,gBACT;AAAA,gBACA,EAAE,SAAS,SAAS,gBAAgB;AAAA,cACtC;AAAA,cAEA,0BAAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAW;AAAA,oBACT;AAAA,oBACA,EAAE,SAAS,SACP,6BACA;AAAA,kBACN;AAAA,kBAEC,YAAE;AAAA;AAAA,cACL;AAAA;AAAA,YAfK;AAAA,UAgBP,CACD;AAAA,UAED,gBAAAA,KAAC,SAAI,KAAK,QAAQ;AAAA;AAAA;AAAA,IACpB;AAAA,IAGA,gBAAAC,MAAC,SAAI,WAAU,qBACb;AAAA,sBAAAD;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,WAAW;AAAA,YACT;AAAA,YACA;AAAA,UACF;AAAA,UACA,OAAO;AAAA,UACP,UAAU,CAAC,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,UACxC,WAAW,CAAC,MAAM;AAChB,gBAAI,EAAE,QAAQ,WAAW,CAAC,EAAE,UAAU;AACpC,gBAAE,eAAe;AACjB,mBAAK,WAAW;AAAA,YAClB;AAAA,UACF;AAAA,UACA,aAAY;AAAA,UACZ,UAAU;AAAA;AAAA,MACZ;AAAA,MAEA,gBAAAA;AAAA,QAAC;AAAA;AAAA,UACC,MAAK;AAAA,UACL,UAAU;AAAA,UACV,SAAS,MAAM,KAAK,WAAW;AAAA,UAC/B,WAAU;AAAA,UAET,oBAAU,eAAe;AAAA;AAAA,MAC5B;AAAA,OACF;AAAA,IAGA,gBAAAC,MAAC,SAAI,WAAU,2BACZ;AAAA,kBACC,gBAAAA,MAAC,UAAK,WAAU,mJAAkJ;AAAA;AAAA,QAC3J;AAAA,SACP;AAAA,MAED,SAAS,gBAAAD,KAAC,OAAE,WAAU,0BAA0B,iBAAM;AAAA,OACzD;AAAA,KACF;AAEJ;AAEO,IAAM,UAAU,iBAAiB,cAAc;AAAA,EACpD,OAAO;AAAA,EACP,SACE;AACJ,CAAC;;;AG/ID,SAAgB,YAAAI,iBAAgB;AAoDtB,gBAAAC,MAGA,QAAAC,aAHA;AA5CV,SAAS,YAAY,MAAc,UAAkB,QAAgB;AACnE,SAAO;AAAA,IACL,wDAAwD,OAAO,YAAY,CAAC,iBAAiB,QAAQ;AAAA,IACrG;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,EAAE,KAAK,IAAI;AACb;AAEA,IAAM,kBAA4B,MAAM;AACtC,QAAM,EAAE,gBAAgB,SAAS,OAAO,SAAS,IAAI,MAAM;AAE3D,QAAM,CAAC,KAAK,MAAM,IAAIC,UAAS,EAAE;AACjC,QAAM,CAAC,KAAK,MAAM,IAAIA,UAAS,EAAE;AAEjC,QAAM,CAAC,OAAO,QAAQ,IAAIA,UAAS,UAAU;AAC7C,QAAM,CAAC,MAAM,OAAO,IAAIA,UAAS,SAAS;AAE1C,iBAAe,kBAAkB;AAC/B,UAAM,OAAO,IAAI,KAAK;AACtB,QAAI,CAAC,KAAM;AAEX,UAAM,SAAS,YAAY,MAAM,MAAM,KAAK;AAC5C,WAAO,EAAE;AAET,UAAM,eAAe,QAAQ;AAAA,MAC3B,SAAS,CAAC,UAAkB;AAC1B,eAAO,CAAC,SAAS,OAAO,KAAK;AAAA,MAC/B;AAAA,MACA,QAAQ,MAAM;AAAA,MAEd;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SACE,gBAAAD,MAAC,QAAK,WAAU,gEAEd;AAAA,oBAAAD,KAAC,SAAI,WAAU,2CACb,0BAAAC,MAAC,SAAI,WAAU,2BACb;AAAA,sBAAAD,KAAC,UAAK,WAAU,mGAAkG,uBAElH;AAAA,MACA,gBAAAC,MAAC,SACC;AAAA,wBAAAD,KAAC,QAAG,WAAU,uCAAsC,wBAAU;AAAA,QAC9D,gBAAAA,KAAC,OAAE,WAAU,0BAAyB,mDAEtC;AAAA,SACF;AAAA,OACF,GACF;AAAA,IAGA,gBAAAC,MAAC,SAAI,WAAU,4CAEb;AAAA,sBAAAA,MAAC,SAAI,WAAU,uBACb;AAAA,wBAAAA,MAAC,SAAI,WAAU,4DACb;AAAA,0BAAAD,KAAC,UAAK,yBAAW;AAAA,UACjB,gBAAAA,KAAC,UAAK,WAAU,cACb,cAAI,KAAK,EAAE,SAAS,GAAG,IAAI,KAAK,EAAE,MAAM,WAAW,oBACtD;AAAA,WACF;AAAA,QAEA,gBAAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YACV,OAAO;AAAA,YACP,UAAU,CAAC,MAAM,OAAO,EAAE,OAAO,KAAK;AAAA,YACtC,aAAY;AAAA;AAAA,QACd;AAAA,QAGA,gBAAAC,MAAC,SAAI,WAAU,4DACb;AAAA,0BAAAA,MAAC,SAAI,WAAU,2BACb;AAAA,4BAAAD,KAAC,UAAK,oBAAM;AAAA,YACZ,gBAAAC;AAAA,cAAC;AAAA;AAAA,gBACC,OAAM;AAAA,gBACN,WAAU;AAAA,gBACV,OAAO;AAAA,gBACP,UAAU,CAAC,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,gBAExC;AAAA,kCAAAD,KAAC,YAAO,sBAAQ;AAAA,kBAChB,gBAAAA,KAAC,YAAO,6BAAe;AAAA,kBACvB,gBAAAA,KAAC,YAAO,0BAAY;AAAA;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,UAEA,gBAAAC,MAAC,SAAI,WAAU,2BACb;AAAA,4BAAAD,KAAC,UAAK,uBAAS;AAAA,YACf,gBAAAC;AAAA,cAAC;AAAA;AAAA,gBACC,OAAM;AAAA,gBACN,WAAU;AAAA,gBACV,OAAO;AAAA,gBACP,UAAU,CAAC,MAAM,QAAQ,EAAE,OAAO,KAAK;AAAA,gBAEvC;AAAA,kCAAAD,KAAC,YAAO,OAAM,QAAO,kBAAI;AAAA,kBACzB,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,aAAY,uBAAS;AAAA,kBACnC,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,cAAa,wBAAU;AAAA,kBACrC,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA;AAAA;AAAA,YACjC;AAAA,aACF;AAAA,WACF;AAAA,QAEA,gBAAAA,KAAC,SAAI,WAAU,QACb,0BAAAA;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,UAAU;AAAA,YACV,SAAS,MAAM,KAAK,gBAAgB;AAAA,YACpC,WAAU;AAAA,YAET,oBAAU,mBAAmB;AAAA;AAAA,QAChC,GACF;AAAA,SACF;AAAA,MAGA,gBAAAC,MAAC,SAAI,WAAU,uBACb;AAAA,wBAAAD,KAAC,SAAI,WAAU,4DACb,0BAAAA,KAAC,UAAK,qBAAO,GACf;AAAA,QAEA,gBAAAA,KAAC,SAAI,WAAU,4GACZ,gBACC,gBAAAA,KAAC,SAAI,WAAU,mCAAmC,eAAI,IAEtD,gBAAAA,KAAC,UAAK,WAAU,kBAAiB,4CAAyB,GAE9D;AAAA,QAEA,gBAAAC,MAAC,SAAI,WAAU,wDACb;AAAA,0BAAAA,MAAC,UAAK;AAAA;AAAA,YACG,gBAAAD,KAAC,UAAK,WAAU,kBAAkB,iBAAM;AAAA,aACjD;AAAA,UACA,gBAAAC,MAAC,UAAK;AAAA;AAAA,YACM,gBAAAD,KAAC,UAAK,WAAU,kBAAkB,gBAAK;AAAA,aACnD;AAAA,WACF;AAAA,SACF;AAAA,OACF;AAAA,IAEA,gBAAAC,MAAC,SAAI,WAAU,2BACZ;AAAA,kBACC,gBAAAA,MAAC,UAAK,WAAU,mJAAkJ;AAAA;AAAA,QAC3J;AAAA,SACP;AAAA,MAED,SAAS,gBAAAD,KAAC,OAAE,WAAU,0BAA0B,iBAAM;AAAA,OACzD;AAAA,KACF;AAEJ;AAEO,IAAM,aAAa,iBAAiB,iBAAiB;AAAA,EAC1D,OAAO;AAAA,EACP,SACE;AACJ,CAAC;;;AC9KD,SAAgB,YAAAG,iBAAgB;AAsDtB,gBAAAC,MAGA,QAAAC,aAHA;AA9CV,SAASC,aAAY,MAAc,MAAc,IAAY;AAC3D,SAAO;AAAA,IACL,qCAAqC,IAAI,OAAO,EAAE;AAAA,IAClD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,EAAE,KAAK,IAAI;AACb;AAEA,IAAM,kBAA4B,MAAM;AACtC,QAAM,EAAE,gBAAgB,SAAS,OAAO,SAAS,IAAI,MAAM;AAE3D,QAAM,CAAC,MAAM,OAAO,IAAIC,UAAS,WAAW;AAC5C,QAAM,CAAC,IAAI,KAAK,IAAIA,UAAS,SAAS;AAEtC,QAAM,CAAC,KAAK,MAAM,IAAIA,UAAS,EAAE;AACjC,QAAM,CAAC,KAAK,MAAM,IAAIA,UAAS,EAAE;AAEjC,iBAAe,kBAAkB;AAC/B,UAAM,OAAO,IAAI,KAAK;AACtB,QAAI,CAAC,KAAM;AAEX,UAAM,SAASD,aAAY,MAAM,MAAM,EAAE;AACzC,WAAO,EAAE;AAET,UAAM,eAAe,QAAQ;AAAA,MAC3B,SAAS,CAAC,UAAkB;AAC1B,eAAO,CAAC,SAAS,OAAO,KAAK;AAAA,MAC/B;AAAA,MACA,QAAQ,MAAM;AAAA,MAEd;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SACE,gBAAAD,MAAC,QAAK,WAAU,gEAEd;AAAA,oBAAAD,KAAC,SAAI,WAAU,2CACb,0BAAAC,MAAC,SAAI,WAAU,2BACb;AAAA,sBAAAD,KAAC,UAAK,WAAU,2FAA0F,uBAE1G;AAAA,MACA,gBAAAC,MAAC,SACC;AAAA,wBAAAD,KAAC,QAAG,WAAU,uCAAsC,wBAAU;AAAA,QAC9D,gBAAAA,KAAC,OAAE,WAAU,0BAAyB,uDAEtC;AAAA,SACF;AAAA,OACF,GACF;AAAA,IAGA,gBAAAC,MAAC,SAAI,WAAU,4CAEb;AAAA,sBAAAA,MAAC,SAAI,WAAU,uBACb;AAAA,wBAAAA,MAAC,SAAI,WAAU,4DACb;AAAA,0BAAAD,KAAC,UAAK,yBAAW;AAAA,UACjB,gBAAAA,KAAC,UAAK,WAAU,cACb,cAAI,KAAK,EAAE,SAAS,GAAG,IAAI,KAAK,EAAE,MAAM,WAAW,oBACtD;AAAA,WACF;AAAA,QAEA,gBAAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YACV,OAAO;AAAA,YACP,UAAU,CAAC,MAAM,OAAO,EAAE,OAAO,KAAK;AAAA,YACtC,aAAY;AAAA;AAAA,QACd;AAAA,QAGA,gBAAAC,MAAC,SAAI,WAAU,4DACb;AAAA,0BAAAA,MAAC,SAAI,WAAU,2BACb;AAAA,4BAAAD,KAAC,UAAK,mBAAK;AAAA,YACX,gBAAAC;AAAA,cAAC;AAAA;AAAA,gBACC,OAAM;AAAA,gBACN,WAAU;AAAA,gBACV,OAAO;AAAA,gBACP,UAAU,CAAC,MAAM,QAAQ,EAAE,OAAO,KAAK;AAAA,gBAEvC;AAAA,kCAAAD,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,aAAY,uBAAS;AAAA,kBACnC,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,cAAa,wBAAU;AAAA,kBACrC,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA;AAAA;AAAA,YACjC;AAAA,aACF;AAAA,UAEA,gBAAAC,MAAC,SAAI,WAAU,2BACb;AAAA,4BAAAD,KAAC,UAAK,iBAAG;AAAA,YACT,gBAAAC;AAAA,cAAC;AAAA;AAAA,gBACC,OAAM;AAAA,gBACN,WAAU;AAAA,gBACV,OAAO;AAAA,gBACP,UAAU,CAAC,MAAM,MAAM,EAAE,OAAO,KAAK;AAAA,gBAErC;AAAA,kCAAAD,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,aAAY,uBAAS;AAAA,kBACnC,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,cAAa,wBAAU;AAAA,kBACrC,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA;AAAA;AAAA,YACjC;AAAA,aACF;AAAA,WACF;AAAA,QAEA,gBAAAA,KAAC,SAAI,WAAU,QACb,0BAAAA;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,UAAU;AAAA,YACV,SAAS,MAAM,KAAK,gBAAgB;AAAA,YACpC,WAAU;AAAA,YAET,oBAAU,mBAAmB;AAAA;AAAA,QAChC,GACF;AAAA,SACF;AAAA,MAGA,gBAAAC,MAAC,SAAI,WAAU,uBACb;AAAA,wBAAAD,KAAC,SAAI,WAAU,4DACb,0BAAAA,KAAC,UAAK,yBAAW,GACnB;AAAA,QAEA,gBAAAA,KAAC,SAAI,WAAU,4GACZ,gBACC,gBAAAA,KAAC,SAAI,WAAU,mCAAmC,eAAI,IAEtD,gBAAAA,KAAC,UAAK,WAAU,kBAAiB,gDAEjC,GAEJ;AAAA,QAEA,gBAAAC,MAAC,SAAI,WAAU,wDACb;AAAA,0BAAAA,MAAC,UAAK;AAAA;AAAA,YACE,gBAAAD,KAAC,UAAK,WAAU,kBAAkB,gBAAK;AAAA,aAC/C;AAAA,UACA,gBAAAC,MAAC,UAAK;AAAA;AAAA,YACA,gBAAAD,KAAC,UAAK,WAAU,kBAAkB,cAAG;AAAA,aAC3C;AAAA,WACF;AAAA,SACF;AAAA,OACF;AAAA,IAEA,gBAAAC,MAAC,SAAI,WAAU,2BACZ;AAAA,kBACC,gBAAAA,MAAC,UAAK,WAAU,mJAAkJ;AAAA;AAAA,QAC3J;AAAA,SACP;AAAA,MAED,SAAS,gBAAAD,KAAC,OAAE,WAAU,0BAA0B,iBAAM;AAAA,OACzD;AAAA,KACF;AAEJ;AAEO,IAAM,aAAa,iBAAiB,iBAAiB;AAAA,EAC1D,OAAO;AAAA,EACP,SACE;AACJ,CAAC;;;ACxLD,SAAgB,WAAAI,UAAS,YAAAC,iBAAgB;AA+G/B,gBAAAC,MAGA,QAAAC,aAHA;AA3FV,SAASC,aACP,MACA,MAMA;AACA,QAAM,WAAiC;AAAA,IACrC,SAAS;AAAA,IACT,QACE;AAAA,IACF,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,cAAc;AAAA,IACd,WAAW;AAAA,EACb;AAEA,QAAM,aAAqC;AAAA,IACzC,SAAS;AAAA,IACT,MAAM;AAAA,IACN,QAAQ;AAAA,EACV;AAEA,QAAM,iBAA6C;AAAA,IACjD,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AAEA,QAAM,OACJ,KAAK,kBAAkB,KAAK,mBAAmB,SAC3C,cAAc,KAAK,cAAc,MACjC;AAEN,SAAO;AAAA,IACL;AAAA,IACA,SAAS,KAAK,IAAI;AAAA,IAClB,WAAW,KAAK,MAAM;AAAA,IACtB,eAAe,KAAK,UAAU;AAAA,IAC9B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,EAAE,KAAK,IAAI;AACb;AAEA,IAAM,gBAA0B,MAAM;AACpC,QAAM,EAAE,gBAAgB,SAAS,OAAO,SAAS,IAAI,MAAM;AAE3D,QAAM,CAAC,KAAK,MAAM,IAAIC,UAAS,EAAE;AACjC,QAAM,CAAC,KAAK,MAAM,IAAIA,UAAS,EAAE;AAEjC,QAAM,CAAC,MAAM,OAAO,IAAIA,UAAe,SAAS;AAChD,QAAM,CAAC,QAAQ,SAAS,IAAIA,UAAiB,MAAM;AACnD,QAAM,CAAC,YAAY,aAAa,IAAIA,UAAqB,QAAQ;AACjE,QAAM,CAAC,MAAM,OAAO,IAAIA,UAA0B,MAAM;AAExD,QAAM,SAASC;AAAA,IACb,MACEF,aAAY,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA;AAAA,MACA,gBAAgB;AAAA,IAClB,CAAC;AAAA,IACH,CAAC,KAAK,MAAM,QAAQ,YAAY,IAAI;AAAA,EACtC;AAEA,iBAAe,gBAAgB;AAC7B,UAAM,OAAO,IAAI,KAAK;AACtB,QAAI,CAAC,KAAM;AAEX,WAAO,EAAE;AAET,UAAM,eAAe,QAAQ;AAAA,MAC3B,SAAS,CAAC,UAAkB;AAC1B,eAAO,CAAC,SAAS,OAAO,KAAK;AAAA,MAC/B;AAAA,MACA,QAAQ,MAAM;AAAA,MAEd;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SACE,gBAAAD,MAAC,QAAK,WAAU,gEAEd;AAAA,oBAAAD,KAAC,SAAI,WAAU,2CACb,0BAAAC,MAAC,SAAI,WAAU,2BACb;AAAA,sBAAAD,KAAC,UAAK,WAAU,6FAA4F,0BAE5G;AAAA,MACA,gBAAAC,MAAC,SACC;AAAA,wBAAAD,KAAC,QAAG,WAAU,uCAAsC,sBAAQ;AAAA,QAC5D,gBAAAA,KAAC,OAAE,WAAU,0BAAyB,2DAEtC;AAAA,SACF;AAAA,OACF,GACF;AAAA,IAGA,gBAAAC,MAAC,SAAI,WAAU,4CAEb;AAAA,sBAAAA,MAAC,SAAI,WAAU,uBACb;AAAA,wBAAAA,MAAC,SAAI,WAAU,4DACb;AAAA,0BAAAD,KAAC,UAAK,2BAAa;AAAA,UACnB,gBAAAA,KAAC,UAAK,WAAU,cACb,cAAI,KAAK,EAAE,SAAS,GAAG,IAAI,KAAK,EAAE,MAAM,WAAW,oBACtD;AAAA,WACF;AAAA,QAEA,gBAAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YACV,OAAO;AAAA,YACP,UAAU,CAAC,MAAM,OAAO,EAAE,OAAO,KAAK;AAAA,YACtC,aAAY;AAAA;AAAA,QACd;AAAA,QAGA,gBAAAC,MAAC,SAAI,WAAU,4DACb;AAAA,0BAAAA,MAAC,SAAI,WAAU,2BACb;AAAA,4BAAAD,KAAC,UAAK,mBAAK;AAAA,YACX,gBAAAC;AAAA,cAAC;AAAA;AAAA,gBACC,OAAM;AAAA,gBACN,WAAU;AAAA,gBACV,OAAO;AAAA,gBACP,UAAU,CAAC,MAAM,QAAQ,EAAE,OAAO,KAAa;AAAA,gBAE/C;AAAA,kCAAAD,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,YAAW,sBAAQ;AAAA,kBACjC,gBAAAA,KAAC,YAAO,OAAM,gBAAe,0BAAY;AAAA,kBACzC,gBAAAA,KAAC,YAAO,OAAM,aAAY,uBAAS;AAAA;AAAA;AAAA,YACrC;AAAA,aACF;AAAA,UAEA,gBAAAC,MAAC,SAAI,WAAU,2BACb;AAAA,4BAAAD,KAAC,UAAK,qBAAO;AAAA,YACb,gBAAAC;AAAA,cAAC;AAAA;AAAA,gBACC,OAAM;AAAA,gBACN,WAAU;AAAA,gBACV,OAAO;AAAA,gBACP,UAAU,CAAC,MAAM,UAAU,EAAE,OAAO,KAAe;AAAA,gBAEnD;AAAA,kCAAAD,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,QAAO,kBAAI;AAAA,kBACzB,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA;AAAA;AAAA,YAC/B;AAAA,aACF;AAAA,UAEA,gBAAAC,MAAC,SAAI,WAAU,2BACb;AAAA,4BAAAD,KAAC,UAAK,yBAAW;AAAA,YACjB,gBAAAC;AAAA,cAAC;AAAA;AAAA,gBACC,OAAM;AAAA,gBACN,WAAU;AAAA,gBACV,OAAO;AAAA,gBACP,UAAU,CAAC,MAAM,cAAc,EAAE,OAAO,KAAmB;AAAA,gBAE3D;AAAA,kCAAAD,KAAC,YAAO,OAAM,OAAM,iBAAG;AAAA,kBACvB,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,QAAO,kBAAI;AAAA;AAAA;AAAA,YAC3B;AAAA,aACF;AAAA,UAEA,gBAAAC,MAAC,SAAI,WAAU,2BACb;AAAA,4BAAAD,KAAC,UAAK,uBAAS;AAAA,YACf,gBAAAC;AAAA,cAAC;AAAA;AAAA,gBACC,OAAM;AAAA,gBACN,WAAU;AAAA,gBACV,OAAO;AAAA,gBACP,UAAU,CAAC,MAAM,QAAQ,EAAE,OAAO,KAAwB;AAAA,gBAE1D;AAAA,kCAAAD,KAAC,YAAO,OAAM,QAAO,kBAAI;AAAA,kBACzB,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,aAAY,uBAAS;AAAA,kBACnC,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,UAAS,oBAAM;AAAA,kBAC7B,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,cAAa,wBAAU;AAAA,kBACrC,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA,kBAC/B,gBAAAA,KAAC,YAAO,OAAM,WAAU,qBAAO;AAAA;AAAA;AAAA,YACjC;AAAA,aACF;AAAA,WACF;AAAA,QAEA,gBAAAA,KAAC,SAAI,WAAU,QACb,0BAAAA;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,UAAU;AAAA,YACV,SAAS,MAAM,KAAK,cAAc;AAAA,YAClC,WAAU;AAAA,YAET,oBAAU,iBAAiB;AAAA;AAAA,QAC9B,GACF;AAAA,SACF;AAAA,MAGA,gBAAAC,MAAC,SAAI,WAAU,uBACb;AAAA,wBAAAD,KAAC,SAAI,WAAU,4DACb,0BAAAA,KAAC,UAAK,oBAAM,GACd;AAAA,QAEA,gBAAAA,KAAC,SAAI,WAAU,4GACZ,gBACC,gBAAAA,KAAC,SAAI,WAAU,mCAAmC,eAAI,IAEtD,gBAAAA,KAAC,UAAK,WAAU,kBAAiB,mDAEjC,GAEJ;AAAA,QAGA,gBAAAC,MAAC,SAAI,WAAU,wDACb;AAAA,0BAAAA,MAAC,UAAK;AAAA;AAAA,YACE,gBAAAD,KAAC,UAAK,WAAU,6BAA6B,gBAAK;AAAA,aAC1D;AAAA,UACA,gBAAAC,MAAC,UAAK;AAAA;AAAA,YACI;AAAA,YACR,gBAAAD,KAAC,UAAK,WAAU,6BAA6B,kBAAO;AAAA,aACtD;AAAA,UACA,gBAAAC,MAAC,UAAK;AAAA;AAAA,YACQ;AAAA,YACZ,gBAAAD,KAAC,UAAK,WAAU,6BAA6B,sBAAW;AAAA,aAC1D;AAAA,UACA,gBAAAC,MAAC,UAAK;AAAA;AAAA,YACM;AAAA,YACV,gBAAAD,KAAC,UAAK,WAAU,kBACb,mBAAS,SAAS,SAAS,MAC9B;AAAA,aACF;AAAA,WACF;AAAA,SACF;AAAA,OACF;AAAA,IAEA,gBAAAC,MAAC,SAAI,WAAU,2BACZ;AAAA,kBACC,gBAAAA,MAAC,UAAK,WAAU,mJAAkJ;AAAA;AAAA,QAC3J;AAAA,SACP;AAAA,MAED,SAAS,gBAAAD,KAAC,OAAE,WAAU,0BAA0B,iBAAM;AAAA,OACzD;AAAA,KACF;AAEJ;AAEO,IAAM,WAAW,iBAAiB,eAAe;AAAA,EACtD,OAAO;AAAA,EACP,SACE;AACJ,CAAC;;;ACtRD,SAAgB,WAAAK,UAAS,YAAAC,iBAAgB;AAsGhC,gBAAAC,aAAA;AApFT,IAAM,uBAAuB;AAC7B,IAAM,qBAAqB;AAE3B,SAAS,SAAS,MAAkC;AAElD,QAAM,MAAO,YAA6C;AAC1D,SAAO,MAAM,IAAI,IAAI,IAAI;AAC3B;AAEA,SAAS,SAAS,MAAkC;AAClD,QAAM,MACJ,OAAO,YAAY,cACd,QAAyC,MAC1C;AACN,SAAO,MAAM,IAAI,IAAI,IAAI;AAC3B;AAEA,SAAS,WAAW,MAAkC;AACpD,QAAM,MAAO,WAAmD;AAChE,SAAO,MAAM,IAAI,IAAI,IAAI;AAC3B;AAEA,SAAS,QAAQ,MAAkC;AACjD,SAAO,SAAS,IAAI,KAAK,SAAS,IAAI,KAAK,WAAW,IAAI;AAC5D;AAEA,IAAM,aAAwC,CAAC;AAAA,EAC7C;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,QAAM,CAAC,UAAU,WAAW,IAAIC;AAAA,IAC9B,mBAAoB,QAAQ,kBAAkB,KAAsB;AAAA,EACtE;AAGA,QAAM,oBAAoB,aAAa,QAAQ,iBAAiB;AAChE,QAAM,kBAAkB,WAAW,QAAQ,eAAe;AAC1D,QAAM,sBACJ,eAAe,QAAQ,mBAAmB,KAAK;AACjD,QAAM,oBACJ,aAAa,QAAQ,iBAAiB,KAAK;AAE7C,QAAM,QAAQC,SAAuB,MAAM;AACzC,UAAM,SAA0B,oBAC5B,IAAI,aAAa,iBAAiB,IAClC;AACJ,UAAM,OAAwB,kBAC1B,IAAI,WAAW,eAAe,IAC9B;AAEJ,UAAM,SACJ,aAAa,SAAS,QAAQ,SAAS,UAAU;AAEnD,UAAM,SACJ,aAAa,SAAS,UAAU,SAAY,QAAQ;AAEtD,UAAM,eACJ,aAAa,SAAS,oBAAoB;AAE5C,QAAI,CAAC,QAAQ;AACX,YAAM,IAAI;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,WAAO;AAAA,MACL,QAAQ;AAAA,MACR,UAAU;AAAA,MACV;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,EACF,GAAG;AAAA,IACD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AAED,SAAO,gBAAAF,MAAC,UAAU,UAAV,EAAmB,OAAe,UAAS;AACrD;AAEA,IAAO,qBAAQ;;;ACrEf,IAAM,OAAO;AAAA,EACX;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAY;AAAA,EACZ;AAAA,EACA;AACF;AAEA,IAAO,gBAAQ;","names":["createContext","useContext","jsx","jsx","useMemo","useState","jsx","jsx","jsx","jsxs","useState","useMemo","useState","jsx","jsxs","useState","useState","jsx","jsxs","buildPrompt","useState","useMemo","useState","jsx","jsxs","buildPrompt","useState","useMemo","useMemo","useState","jsx","useState","useMemo"]}